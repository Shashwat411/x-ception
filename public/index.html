<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NovaBharat Bank ‚Äì AI Voice Banking</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&display=swap" rel="stylesheet">
<style>
/* ===== DESIGN SYSTEM ===== */
:root {
  --navy: #0a1628;
  --navy-mid: #0f2044;
  --blue: #1a4fa0;
  --blue-bright: #2563eb;
  --cyan: #06b6d4;
  --gold: #f59e0b;
  --gold-light: #fcd34d;
  --white: #f8fafc;
  --gray: #94a3b8;
  --gray-light: #e2e8f0;
  --success: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
  --surface: rgba(255,255,255,0.04);
  --border: rgba(255,255,255,0.08);
  --radius: 16px;
  --shadow: 0 8px 32px rgba(0,0,0,0.4);
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body { font-family:'DM Sans',sans-serif; background:var(--navy); color:var(--white); overflow-x:hidden; }

/* ===== LAYOUT ===== */
.page { display:none; min-height:100vh; animation:fadeIn .3s ease; }
.page.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }

/* ===== NAV ===== */
nav {
  position:fixed; top:0; left:0; right:0; z-index:1000;
  background:rgba(10,22,40,.96); backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
  padding:0 5%; height:70px; display:flex; align-items:center; justify-content:space-between;
}
.logo { display:flex; align-items:center; gap:10px; cursor:pointer; }
.logo-box {
  width:38px; height:38px; background:linear-gradient(135deg,var(--blue-bright),var(--cyan));
  border-radius:10px; display:flex; align-items:center; justify-content:center;
  font-family:'Rajdhani',sans-serif; font-weight:700; font-size:18px;
}
.logo-text { font-family:'Rajdhani',sans-serif; font-size:20px; font-weight:700; letter-spacing:1px; }
.logo-text span { color:var(--cyan); }
.nav-right { display:flex; gap:12px; align-items:center; }
.lang-sel {
  background:var(--surface); border:1px solid var(--border); border-radius:8px;
  color:var(--white); font-family:'DM Sans',sans-serif; font-size:13px;
  padding:7px 10px; cursor:pointer; outline:none;
}
.lang-sel option { background:var(--navy-mid); }

/* ===== BUTTONS ===== */
.btn { padding:10px 22px; border-radius:8px; font-size:14px; font-weight:500; cursor:pointer; border:none; transition:all .2s; font-family:'DM Sans',sans-serif; }
.btn-outline { background:transparent; border:1px solid var(--border); color:var(--white); }
.btn-outline:hover { border-color:var(--cyan); color:var(--cyan); }
.btn-primary { background:linear-gradient(135deg,var(--blue-bright),var(--cyan)); color:#fff; }
.btn-primary:hover { opacity:.9; transform:translateY(-1px); box-shadow:0 4px 20px rgba(37,99,235,.4); }
.btn-gold { background:linear-gradient(135deg,var(--gold),var(--gold-light)); color:var(--navy); font-weight:600; }
.btn-danger { background:var(--danger); color:#fff; }
.btn-success { background:var(--success); color:#fff; }
.btn-block { width:100%; padding:13px; font-size:15px; }

/* ===== HERO ===== */
.hero {
  min-height:100vh; padding-top:70px;
  background:linear-gradient(135deg,var(--navy) 0%,var(--navy-mid) 50%,#0d1f3c 100%);
  position:relative; overflow:hidden; display:flex; align-items:center;
}
.hero::before {
  content:''; position:absolute; inset:0;
  background: radial-gradient(ellipse 80% 60% at 70% 50%,rgba(37,99,235,.12) 0%,transparent 70%),
              radial-gradient(ellipse 40% 40% at 20% 80%,rgba(6,182,212,.08) 0%,transparent 60%);
}
.grid-bg { position:absolute; inset:0; opacity:.04; background-image:linear-gradient(var(--border) 1px,transparent 1px),linear-gradient(90deg,var(--border) 1px,transparent 1px); background-size:60px 60px; }
.hero-inner { position:relative; z-index:1; padding:80px 5%; max-width:1300px; margin:0 auto; width:100%; }
.hero-grid { display:grid; grid-template-columns:1fr 1fr; gap:60px; align-items:center; }
.hero-tag { display:inline-flex; align-items:center; gap:8px; padding:6px 14px; background:rgba(6,182,212,.1); border:1px solid rgba(6,182,212,.3); border-radius:50px; font-size:12px; font-weight:500; color:var(--cyan); margin-bottom:20px; }
.hero-tag::before { content:''; width:6px; height:6px; background:var(--cyan); border-radius:50%; animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.4} }
h1 { font-family:'Rajdhani',sans-serif; font-size:clamp(40px,5vw,68px); font-weight:700; line-height:1.05; margin-bottom:20px; }
.accent { color:var(--cyan); }
.gold-text { color:var(--gold); }
.hero-sub { font-size:17px; color:var(--gray); line-height:1.7; margin-bottom:36px; }
.hero-actions { display:flex; gap:14px; flex-wrap:wrap; }
.hero-stats { display:flex; gap:32px; margin-top:48px; }
.stat-num { font-family:'Rajdhani',sans-serif; font-size:30px; font-weight:700; }
.stat-label { font-size:12px; color:var(--gray); margin-top:2px; }

/* ===== VOICE CARD ===== */
.voice-card { background:linear-gradient(135deg,rgba(15,32,68,.8),rgba(10,22,40,.9)); border:1px solid rgba(37,99,235,.3); border-radius:24px; padding:32px; position:relative; overflow:hidden; }
.vc-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; }
.vc-title { font-family:'Rajdhani',sans-serif; font-size:18px; font-weight:600; }
.ai-badge { padding:4px 12px; border-radius:50px; background:rgba(6,182,212,.15); border:1px solid rgba(6,182,212,.4); font-size:11px; font-weight:600; color:var(--cyan); }
.voice-viz { display:flex; align-items:center; justify-content:center; gap:4px; height:60px; margin-bottom:20px; }
.vbar { width:4px; background:linear-gradient(to top,var(--blue-bright),var(--cyan)); border-radius:2px; animation:wave 1.2s ease-in-out infinite; }
.vbar:nth-child(1){height:20px;animation-delay:0s}.vbar:nth-child(2){height:35px;animation-delay:.1s}.vbar:nth-child(3){height:50px;animation-delay:.2s}.vbar:nth-child(4){height:60px;animation-delay:.3s}.vbar:nth-child(5){height:45px;animation-delay:.4s}.vbar:nth-child(6){height:55px;animation-delay:.5s}.vbar:nth-child(7){height:40px;animation-delay:.6s}.vbar:nth-child(8){height:30px;animation-delay:.7s}.vbar:nth-child(9){height:20px;animation-delay:.8s}
@keyframes wave { 0%,100%{transform:scaleY(1)} 50%{transform:scaleY(.3)} }
.mic-btn { width:70px; height:70px; border-radius:50%; margin:0 auto 16px; display:flex; align-items:center; justify-content:center; cursor:pointer; background:linear-gradient(135deg,var(--blue-bright),var(--cyan)); box-shadow:0 0 0 0 rgba(37,99,235,.4); animation:micPulse 2s infinite; border:none; color:#fff; font-size:26px; }
@keyframes micPulse { 0%{box-shadow:0 0 0 0 rgba(37,99,235,.4)} 70%{box-shadow:0 0 0 15px rgba(37,99,235,0)} 100%{box-shadow:0 0 0 0 rgba(37,99,235,0)} }
.lang-pills { display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
.lang-pill { padding:5px 14px; border-radius:50px; font-size:12px; font-weight:500; background:var(--surface); border:1px solid var(--border); color:var(--gray); cursor:pointer; transition:all .2s; }
.lang-pill.active,.lang-pill:hover { background:rgba(37,99,235,.2); border-color:var(--blue-bright); color:var(--white); }

/* ===== SECTION ===== */
.section { padding:80px 5%; max-width:1300px; margin:0 auto; }
.sec-tag { display:inline-block; padding:5px 14px; border-radius:50px; background:rgba(37,99,235,.1); border:1px solid rgba(37,99,235,.3); font-size:12px; font-weight:600; color:var(--blue-bright); margin-bottom:14px; letter-spacing:.5px; text-transform:uppercase; }
h2 { font-family:'Rajdhani',sans-serif; font-size:clamp(30px,4vw,46px); font-weight:700; line-height:1.15; margin-bottom:16px; }
.sec-sub { color:var(--gray); font-size:16px; line-height:1.7; max-width:600px; margin-bottom:48px; }

/* ===== CARDS ===== */
.cards-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:24px; }
.card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:28px; transition:all .3s; position:relative; overflow:hidden; }
.card:hover { border-color:rgba(37,99,235,.4); transform:translateY(-4px); box-shadow:var(--shadow); }
.card-icon { width:50px; height:50px; border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:22px; margin-bottom:16px; }
.ic-blue{background:rgba(37,99,235,.15)} .ic-cyan{background:rgba(6,182,212,.15)} .ic-gold{background:rgba(245,158,11,.15)} .ic-green{background:rgba(16,185,129,.15)}
.card h3 { font-family:'Rajdhani',sans-serif; font-size:20px; font-weight:600; margin-bottom:8px; }
.card p { font-size:14px; color:var(--gray); line-height:1.6; }

/* ===== RATES ===== */
.rates-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:16px; }
.rate-card { background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:22px; text-align:center; }
.rate-type { font-size:13px; color:var(--gray); margin-bottom:8px; }
.rate-val { font-family:'Rajdhani',sans-serif; font-size:36px; font-weight:700; color:var(--gold); }

/* ===== FOOTER ===== */
footer { background:rgba(15,32,68,.9); border-top:1px solid var(--border); padding:48px 5% 24px; }
.footer-grid { display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:40px; margin-bottom:40px; max-width:1300px; margin:0 auto 40px; }
.footer-col h4 { font-weight:600; font-size:14px; margin-bottom:14px; }
.footer-col a { display:block; color:var(--gray); font-size:13px; margin-bottom:8px; cursor:pointer; text-decoration:none; }
.footer-col a:hover { color:var(--white); }
.footer-bottom { border-top:1px solid var(--border); padding-top:20px; display:flex; justify-content:space-between; font-size:12px; color:var(--gray); max-width:1300px; margin:0 auto; }

/* ===== AUTH PAGES ===== */
.auth-wrap { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:90px 20px 40px; }
.auth-box { max-width:480px; width:100%; background:rgba(15,32,68,.85); border:1px solid var(--border); border-radius:24px; padding:40px; }
.auth-box h2 { font-family:'Rajdhani',sans-serif; font-size:30px; font-weight:700; margin-bottom:6px; }
.auth-box .sub { color:var(--gray); font-size:14px; margin-bottom:28px; }
.auth-split { display:grid; grid-template-columns:1fr 1fr; max-width:900px; width:100%; }
.auth-left { background:linear-gradient(135deg,var(--blue),var(--blue-bright)); padding:48px; border-radius:24px 0 0 24px; display:flex; flex-direction:column; justify-content:center; }
.auth-left h2 { font-family:'Rajdhani',sans-serif; font-size:34px; font-weight:700; margin-bottom:12px; }
.auth-left p { opacity:.8; font-size:14px; line-height:1.7; }
.auth-feats { margin-top:28px; display:flex; flex-direction:column; gap:12px; }
.af { display:flex; align-items:center; gap:10px; font-size:13px; opacity:.9; }
.af-dot { width:7px; height:7px; border-radius:50%; background:var(--cyan); flex-shrink:0; }
.auth-right { padding:48px; background:rgba(15,32,68,.85); border-radius:0 24px 24px 0; }
.auth-right h3 { font-family:'Rajdhani',sans-serif; font-size:26px; font-weight:700; margin-bottom:6px; }

/* ===== FORM ===== */
.form-group { margin-bottom:18px; }
.form-group label { display:block; font-size:13px; font-weight:500; color:var(--gray); margin-bottom:7px; }
.form-group input, .form-group select {
  width:100%; background:rgba(255,255,255,.05); border:1px solid var(--border); border-radius:8px;
  padding:11px 14px; color:var(--white); font-size:14px; font-family:'DM Sans',sans-serif; outline:none; transition:border .2s;
}
.form-group input:focus, .form-group select:focus { border-color:rgba(37,99,235,.5); }
.form-group select option { background:var(--navy-mid); }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.input-info { font-size:11px; color:var(--gray); margin-top:5px; }
.pin-row { display:flex; gap:10px; }
.pin-inp { width:52px; height:52px; text-align:center; font-size:20px; font-weight:700; background:rgba(255,255,255,.05); border:1px solid var(--border); border-radius:8px; color:var(--white); outline:none; }
.pin-inp:focus { border-color:var(--cyan); }

/* ===== DASHBOARD ===== */
.dash-wrap { display:flex; height:calc(100vh - 70px); margin-top:70px; }
.sidebar { width:260px; flex-shrink:0; background:rgba(15,32,68,.8); border-right:1px solid var(--border); padding:24px 0; display:flex; flex-direction:column; overflow-y:auto; }
.sb-user { padding:0 20px 20px; border-bottom:1px solid var(--border); margin-bottom:8px; }
.sb-avatar { width:48px; height:48px; border-radius:50%; background:linear-gradient(135deg,var(--gold),var(--gold-light)); display:flex; align-items:center; justify-content:center; font-size:20px; margin-bottom:10px; }
.sb-name { font-weight:600; font-size:15px; }
.sb-id { font-size:12px; color:var(--gray); }
.sb-bal { font-family:'Rajdhani',sans-serif; font-size:20px; font-weight:700; color:var(--success); margin-top:6px; }
.nav-section { font-size:11px; color:var(--gray); padding:12px 20px 4px; letter-spacing:1px; text-transform:uppercase; font-weight:600; }
.nav-item { display:flex; align-items:center; gap:12px; padding:11px 20px; cursor:pointer; transition:all .2s; font-size:14px; color:var(--gray); border-left:3px solid transparent; }
.nav-item:hover { background:rgba(37,99,235,.08); color:var(--white); }
.nav-item.active { background:rgba(37,99,235,.12); color:var(--white); border-left-color:var(--blue-bright); }
.nav-icon { font-size:16px; width:20px; text-align:center; }
.dash-main { flex:1; overflow-y:auto; padding:28px; }
.sec-content { display:none; animation:fadeIn .25s ease; }
.sec-content.active { display:block; }
.dash-head { margin-bottom:24px; }
.dash-head h2 { font-family:'Rajdhani',sans-serif; font-size:26px; font-weight:700; }
.dash-head p { color:var(--gray); font-size:14px; }

/* ===== BALANCE CARDS ===== */
.bal-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-bottom:24px; }
.bal-card { border-radius:16px; padding:22px; position:relative; overflow:hidden; }
.bc1{background:linear-gradient(135deg,#1a4fa0,#2563eb)}
.bc2{background:linear-gradient(135deg,#0e7490,#06b6d4)}
.bc3{background:linear-gradient(135deg,#b45309,#f59e0b)}
.bc4{background:linear-gradient(135deg,#047857,#10b981)}
.bc-lbl { font-size:12px; opacity:.8; margin-bottom:6px; }
.bc-amt { font-family:'Rajdhani',sans-serif; font-size:30px; font-weight:700; }
.bc-sub { font-size:12px; opacity:.7; margin-top:4px; }
.bc-ico { position:absolute; right:16px; top:16px; font-size:26px; opacity:.25; }

/* ===== TABLE ===== */
.table-wrap { background:var(--surface); border:1px solid var(--border); border-radius:14px; overflow:hidden; }
.table-head { padding:16px 20px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; }
.table-head span { font-weight:600; font-size:15px; }
table { width:100%; border-collapse:collapse; }
th { text-align:left; padding:12px 16px; font-size:12px; font-weight:600; color:var(--gray); border-bottom:1px solid var(--border); text-transform:uppercase; }
td { padding:13px 16px; font-size:14px; border-bottom:1px solid var(--border); }
tr:last-child td { border-bottom:none; }
.cr { color:var(--success); font-weight:500; }
.dr { color:var(--danger); font-weight:500; }

/* ===== TAGS ===== */
.tag { padding:4px 10px; border-radius:50px; font-size:11px; font-weight:600; }
.tag-success { background:rgba(16,185,129,.15); color:var(--success); border:1px solid rgba(16,185,129,.3); }
.tag-danger { background:rgba(239,68,68,.15); color:var(--danger); border:1px solid rgba(239,68,68,.3); }
.tag-warn { background:rgba(245,158,11,.15); color:var(--warning); border:1px solid rgba(245,158,11,.3); }
.tag-blue { background:rgba(37,99,235,.15); color:#60a5fa; border:1px solid rgba(37,99,235,.3); }

/* ===== QUICK ACTIONS ===== */
.qa-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:24px; }
.qa-btn { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:16px 10px; text-align:center; cursor:pointer; transition:all .2s; }
.qa-btn:hover { border-color:rgba(37,99,235,.4); background:rgba(37,99,235,.08); }
.qa-icon { font-size:22px; margin-bottom:6px; }
.qa-lbl { font-size:12px; color:var(--gray); }

/* ===== CHART ===== */
.chart-box { background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:22px; margin-bottom:20px; }
.chart-title { font-size:15px; font-weight:600; margin-bottom:16px; display:flex; justify-content:space-between; align-items:center; }
.chart-bars { display:flex; align-items:flex-end; gap:10px; height:100px; }
.c-bar { flex:1; border-radius:4px 4px 0 0; background:linear-gradient(to top,var(--blue-bright),var(--cyan)); min-height:4px; }

/* ===== PROGRESS ===== */
.prog { background:rgba(255,255,255,.08); border-radius:50px; height:6px; }
.prog-fill { height:100%; border-radius:50px; background:linear-gradient(to right,var(--blue-bright),var(--cyan)); }

/* ===== FORM BOX ===== */
.form-box { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:28px; margin-bottom:24px; }
.form-box h3 { font-family:'Rajdhani',sans-serif; font-size:22px; font-weight:700; margin-bottom:20px; }

/* ===== MODAL ===== */
.overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:2000; align-items:center; justify-content:center; backdrop-filter:blur(10px); }
.overlay.show { display:flex; }
.modal { background:linear-gradient(135deg,var(--navy-mid),var(--navy)); border:1px solid rgba(37,99,235,.3); border-radius:24px; padding:36px; max-width:440px; width:90%; animation:slideUp .3s ease; }
@keyframes slideUp { from{transform:translateY(20px);opacity:0} to{transform:translateY(0);opacity:1} }
.modal h3 { font-family:'Rajdhani',sans-serif; font-size:26px; font-weight:700; margin-bottom:8px; }
.modal p { color:var(--gray); font-size:14px; margin-bottom:20px; line-height:1.6; }
.auth-ring { width:90px; height:90px; border-radius:50%; background:linear-gradient(135deg,var(--blue-bright),var(--cyan)); display:flex; align-items:center; justify-content:center; font-size:34px; cursor:pointer; margin:0 auto 16px; position:relative; }
.auth-ring::before { content:''; position:absolute; inset:-8px; border-radius:50%; border:2px solid rgba(37,99,235,.3); animation:spin 3s linear infinite; }
@keyframes spin { from{transform:rotate(0)} to{transform:rotate(360deg)} }
.step-list { display:flex; flex-direction:column; gap:8px; margin-bottom:20px; }
.step { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:8px; background:var(--surface); border:1px solid var(--border); font-size:13px; }
.step-n { width:22px; height:22px; border-radius:50%; background:rgba(37,99,235,.2); display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:600; flex-shrink:0; }
.step-n.done { background:rgba(16,185,129,.2); color:var(--success); }

/* ===== TOAST ===== */
.toast { position:fixed; top:80px; right:20px; z-index:3000; padding:13px 20px; border-radius:10px; font-size:14px; font-weight:500; background:rgba(15,32,68,.97); border:1px solid var(--border); backdrop-filter:blur(20px); display:none; animation:toastIn .3s ease; max-width:340px; }
.toast.show { display:block; }
.toast.ok { border-color:rgba(16,185,129,.4); color:var(--success); }
.toast.err { border-color:rgba(239,68,68,.4); color:var(--danger); }
@keyframes toastIn { from{transform:translateX(20px);opacity:0} to{transform:translateX(0);opacity:1} }

/* ===== FLOATING VOICE ===== */
.float-mic { position:fixed; bottom:30px; right:30px; z-index:999; width:60px; height:60px; border-radius:50%; cursor:pointer; border:none; background:linear-gradient(135deg,var(--blue-bright),var(--cyan)); font-size:22px; color:#fff; box-shadow:0 8px 24px rgba(37,99,235,.5); animation:floatPulse 3s ease-in-out infinite; display:flex; align-items:center; justify-content:center; }
@keyframes floatPulse { 0%,100%{box-shadow:0 8px 24px rgba(37,99,235,.5)} 50%{box-shadow:0 8px 40px rgba(37,99,235,.8)} }

/* ===== VOICE PANEL ===== */
.voice-panel { position:fixed; bottom:100px; right:30px; z-index:998; width:360px; background:linear-gradient(135deg,rgba(15,32,68,.97),rgba(10,22,40,.98)); border:1px solid rgba(37,99,235,.3); border-radius:20px; display:none; box-shadow:0 20px 60px rgba(0,0,0,.6); overflow:hidden; }
.voice-panel.open { display:block; animation:slideUp .3s ease; }
.vp-head { padding:14px 18px; background:rgba(37,99,235,.1); border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; }
.vp-title { font-weight:600; font-size:14px; }
.vp-close { cursor:pointer; background:none; border:none; color:var(--gray); font-size:18px; }
.vp-lang-bar { display:flex; gap:6px; padding:10px 14px 6px; }
.vpl-btn { padding:4px 12px; border-radius:50px; font-size:11px; background:var(--surface); border:1px solid var(--border); color:var(--gray); cursor:pointer; }
.vpl-btn.active { background:rgba(37,99,235,.2); border-color:var(--blue-bright); color:#fff; }
.vp-msgs { height:220px; overflow-y:auto; padding:12px 14px; display:flex; flex-direction:column; gap:8px; }
.vp-msgs::-webkit-scrollbar { width:3px; }
.vp-msgs::-webkit-scrollbar-thumb { background:var(--border); }
.vpm { padding:10px 13px; border-radius:12px; font-size:13px; line-height:1.5; white-space:pre-line; max-width:90%; }
.vpm.ai { background:rgba(37,99,235,.15); align-self:flex-start; }
.vpm.user { background:linear-gradient(135deg,var(--blue-bright),rgba(37,99,235,.8)); align-self:flex-end; }
.vp-emotion { font-size:11px; color:var(--gold); padding:3px 10px; background:rgba(245,158,11,.1); border-radius:50px; display:inline-block; margin:0 14px 8px; }
.vp-inp-row { display:flex; gap:8px; padding:10px 14px; border-top:1px solid var(--border); }
.vp-inp { flex:1; background:rgba(255,255,255,.05); border:1px solid var(--border); border-radius:8px; padding:9px 12px; color:var(--white); font-size:13px; font-family:'DM Sans',sans-serif; outline:none; }
.vp-inp:focus { border-color:rgba(37,99,235,.5); }
.vp-mic-btn { width:38px; height:38px; border-radius:50%; background:linear-gradient(135deg,var(--blue-bright),var(--cyan)); border:none; color:#fff; font-size:16px; cursor:pointer; display:flex; align-items:center; justify-content:center; flex-shrink:0; }

/* PIN MODAL */
.pin-modal-body { text-align:center; }
.pin-modal-body .pin-row { justify-content:center; margin:16px 0 8px; }

/* SCROLLBAR */
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-track { background:var(--navy); }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,.1); border-radius:3px; }

/* RESPONSIVE */
@media(max-width:768px) {
  .hero-grid,.auth-split,.footer-grid,.form-row { grid-template-columns:1fr; }
  .auth-split .auth-left { border-radius:24px 24px 0 0; }
  .auth-split .auth-right { border-radius:0 0 24px 24px; }
  .sidebar { display:none; }
  .qa-grid { grid-template-columns:repeat(2,1fr); }
}

/* EMI CARD */
.emi-card { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:18px; }
.emi-row { display:flex; justify-content:space-between; align-items:center; padding:9px 0; border-bottom:1px solid var(--border); font-size:14px; }
.emi-row:last-child { border-bottom:none; }
.emi-key { color:var(--gray); }
</style>
</head>
<body>

<!-- ===== TOAST ===== -->
<div class="toast" id="toast"></div>

<!-- ===== TOP NAV (public) ===== -->
<nav id="pub-nav">
  <div class="logo" onclick="goto('home')">
    <div class="logo-box">NB</div>
    <span class="logo-text">Nova<span>Bharat</span> Bank</span>
  </div>
  <div class="nav-right">
    <select class="lang-sel" id="global-lang" onchange="setLang(this.value)">
      <option value="en">üåê English</option>
      <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
      <option value="mr">üèõÔ∏è ‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
      <option value="ta">üå∫ ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>
    <button class="btn btn-outline" onclick="goto('login')" id="nav-login-btn">Login</button>
    <button class="btn btn-primary" onclick="goto('signup')">Open Account</button>
  </div>
</nav>

<!-- ===== HOME PAGE ===== -->
<div class="page active" id="home-page">
  <div class="hero">
    <div class="grid-bg"></div>
    <div class="hero-inner">
      <div class="hero-grid">
        <div>
          <div class="hero-tag" id="ht1">ü§ñ India's First AI Voice Banking</div>
          <h1 id="ht2">Banking With <span class="accent">Your Voice</span>,<br><span class="gold-text">Your Language</span></h1>
          <p class="hero-sub" id="ht3">Speak in Hindi, Marathi, English or Tamil. Check balance, transfer funds, manage cards ‚Äî all by voice. Secured by AI biometrics.</p>
          <div class="hero-actions">
            <button class="btn btn-primary" style="font-size:15px;padding:13px 28px" onclick="openVP()">üé§ Try Voice Banking</button>
            <button class="btn btn-gold" style="font-size:15px;padding:13px 28px" onclick="goto('signup')" id="h-open-btn">Open Account Free</button>
          </div>
          <div class="hero-stats">
            <div><div class="stat-num">‚Çπ4.2L Cr</div><div class="stat-label">Assets Managed</div></div>
            <div><div class="stat-num">2.8 Cr+</div><div class="stat-label">Customers</div></div>
            <div><div class="stat-num">99.98%</div><div class="stat-label">Uptime</div></div>
          </div>
        </div>
        <div>
          <div class="voice-card">
            <div class="vc-header">
              <div class="vc-title" id="vc-title">AI Voice Assistant</div>
              <div class="ai-badge">LIVE AI</div>
            </div>
            <div class="voice-viz">
              <div class="vbar"></div><div class="vbar"></div><div class="vbar"></div>
              <div class="vbar"></div><div class="vbar"></div><div class="vbar"></div>
              <div class="vbar"></div><div class="vbar"></div><div class="vbar"></div>
            </div>
            <button class="mic-btn" onclick="openVP()">üé§</button>
            <div class="lang-pills">
              <div class="lang-pill active" onclick="switchLangPill(this,'en')">English</div>
              <div class="lang-pill" onclick="switchLangPill(this,'hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
              <div class="lang-pill" onclick="switchLangPill(this,'mr')">‡§Æ‡§∞‡§æ‡§†‡•Ä</div>
              <div class="lang-pill" onclick="switchLangPill(this,'ta')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PRODUCTS -->
  <div class="section">
    <div class="sec-tag" id="prod-tag">Products & Services</div>
    <h2 id="prod-h">Everything You Need</h2>
    <p class="sec-sub" id="prod-sub">From savings accounts to home loans ‚Äî managed entirely through your voice or fingertips.</p>
    <div class="cards-grid">
      <div class="card"><div class="card-icon ic-blue">üí≥</div><h3 id="p1h">Savings Account</h3><p id="p1p">Earn up to 7% interest p.a. with zero balance option and instant video KYC.</p><button class="btn btn-outline" style="margin-top:14px;font-size:13px;width:100%" onclick="goto('signup')">Open Account</button></div>
      <div class="card"><div class="card-icon ic-gold">üè†</div><h3 id="p2h">Home Loan</h3><p id="p2p">Starting at 8.45% p.a. with flexible tenure up to 30 years.</p><button class="btn btn-outline" style="margin-top:14px;font-size:13px;width:100%">Apply Now</button></div>
      <div class="card"><div class="card-icon ic-cyan">üìà</div><h3 id="p3h">Fixed Deposit</h3><p id="p3p">Earn 8.25% p.a. Auto-renewal and AI-driven maturity reminders.</p><button class="btn btn-outline" style="margin-top:14px;font-size:13px;width:100%">Invest Now</button></div>
      <div class="card"><div class="card-icon ic-green">üöó</div><h3 id="p4h">Car Loan</h3><p id="p4p">Up to ‚Çπ50 lakh at 9.20% p.a. Instant AI credit scoring in 60 seconds.</p><button class="btn btn-outline" style="margin-top:14px;font-size:13px;width:100%">Check Eligibility</button></div>
    </div>
  </div>

  <!-- RATES -->
  <div style="background:rgba(15,32,68,.4);padding:60px 5%">
    <div class="section" style="padding:0;max-width:1300px;margin:0 auto">
      <div class="sec-tag">Interest Rates</div>
      <h2>Competitive Rates</h2>
      <div class="rates-grid" style="margin-top:32px">
        <div class="rate-card"><div class="rate-type">Savings A/C</div><div class="rate-val">7.0%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Per Annum</div></div>
        <div class="rate-card"><div class="rate-type">Fixed Deposit 1Y</div><div class="rate-val">8.25%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Per Annum</div></div>
        <div class="rate-card"><div class="rate-type">Fixed Deposit 3Y</div><div class="rate-val">8.75%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Per Annum</div></div>
        <div class="rate-card"><div class="rate-type">Home Loan</div><div class="rate-val">8.45%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Per Annum</div></div>
        <div class="rate-card"><div class="rate-type">Personal Loan</div><div class="rate-val">10.5%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Per Annum</div></div>
        <div class="rate-card"><div class="rate-type">Car Loan</div><div class="rate-val">9.20%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Per Annum</div></div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-grid">
      <div><div class="logo"><div class="logo-box">NB</div><span class="logo-text">Nova<span>Bharat</span> Bank</span></div><p style="color:var(--gray);font-size:13px;margin-top:12px;line-height:1.7">India's most intelligent banking platform. RBI Regulated | IRDAI Approved</p></div>
      <div class="footer-col"><h4>Products</h4><a>Savings Account</a><a>Current Account</a><a>Fixed Deposit</a><a>Home Loan</a></div>
      <div class="footer-col"><h4>Digital</h4><a>Net Banking</a><a>Mobile App</a><a>UPI</a><a onclick="openVP()">AI Voice Banking</a></div>
      <div class="footer-col"><h4>Company</h4><a>About Us</a><a>Careers</a><a>CSR</a><a onclick="goto('admin-login')">Admin Portal</a></div>
    </div>
    <div class="footer-bottom"><span>¬© 2025 NovaBharat Bank Ltd. CIN: U65191MH2024PLC000001</span><span>Privacy | Terms | Grievance</span></div>
  </footer>
</div>

<!-- ===== SIGNUP PAGE ===== -->
<div class="page" id="signup-page">
  <div class="auth-wrap">
    <div class="auth-split" style="border-radius:24px;overflow:hidden;border:1px solid var(--border)">
      <div class="auth-left">
        <div style="font-size:12px;font-weight:600;opacity:.7;letter-spacing:2px;text-transform:uppercase;margin-bottom:12px">New Account</div>
        <h2>Join NovaBharat Bank</h2>
        <p>Create your account in minutes with voice biometric setup and instant KYC.</p>
        <div class="auth-feats">
          <div class="af"><div class="af-dot"></div>Instant account opening</div>
          <div class="af"><div class="af-dot"></div>Voice biometric from day 1</div>
          <div class="af"><div class="af-dot"></div>Multilingual AI support</div>
          <div class="af"><div class="af-dot"></div>Zero balance savings account</div>
        </div>
      </div>
      <div class="auth-right">
        <h3>Create Account</h3>
        <div class="sub" style="color:var(--gray);font-size:13px;margin-bottom:24px">Fill details to open your account</div>
        <div class="form-row">
          <div class="form-group"><label>Full Name *</label><input type="text" id="su-name" placeholder="As per Aadhaar"></div>
          <div class="form-group"><label>Mobile Number *</label><input type="tel" id="su-phone" placeholder="+91 XXXXXXXXXX"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Date of Birth *</label><input type="date" id="su-dob"></div>
          <div class="form-group"><label>Aadhaar / PAN *</label><input type="text" id="su-kyc" placeholder="XXXX XXXX XXXX"></div>
        </div>
        <div class="form-group"><label>Address *</label><input type="text" id="su-addr" placeholder="House No, Street, City, State - PIN"></div>
        <div class="form-row">
          <div class="form-group"><label>Password *</label><input type="password" id="su-pwd" placeholder="Min 8 characters"></div>
          <div class="form-group"><label>Confirm Password *</label><input type="password" id="su-pwd2" placeholder="Re-enter password"></div>
        </div>
        <div class="form-group">
          <label>Transaction PIN (4-digit) *</label>
          <div class="pin-row">
            <input class="pin-inp" type="password" maxlength="1" id="pin1" oninput="pinNav(this,'pin2')">
            <input class="pin-inp" type="password" maxlength="1" id="pin2" oninput="pinNav(this,'pin3')">
            <input class="pin-inp" type="password" maxlength="1" id="pin3" oninput="pinNav(this,'pin4')">
            <input class="pin-inp" type="password" maxlength="1" id="pin4">
          </div>
          <div class="input-info">This PIN will be used to confirm fund transfers & sensitive operations.</div>
        </div>
        <div class="form-group"><label>Preferred Language</label>
          <select id="su-lang">
            <option value="en">English</option>
            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
          </select>
        </div>
        <button class="btn btn-primary btn-block" onclick="doSignup()" style="margin-top:8px">Create Account & Register Voice</button>
        <div style="text-align:center;margin-top:14px;font-size:13px;color:var(--gray)">Already have an account? <span style="color:var(--cyan);cursor:pointer" onclick="goto('login')">Login here</span></div>
      </div>
    </div>
  </div>
</div>

<!-- ===== LOGIN PAGE ===== -->
<div class="page" id="login-page">
  <div class="auth-wrap">
    <div class="auth-split" style="border-radius:24px;overflow:hidden;border:1px solid var(--border)">
      <div class="auth-left">
        <div style="font-size:12px;font-weight:600;opacity:.7;letter-spacing:2px;text-transform:uppercase;margin-bottom:12px">Secure Banking</div>
        <h2>Welcome Back!</h2>
        <p>Sign in with Account Number or Name + Password. Multi-factor authentication powered by AI.</p>
        <div class="auth-feats">
          <div class="af"><div class="af-dot"></div>Login by Account No or Name</div>
          <div class="af"><div class="af-dot"></div>Voice Biometric Option</div>
          <div class="af"><div class="af-dot"></div>256-bit AES Encrypted</div>
          <div class="af"><div class="af-dot"></div>Real-time Fraud Detection</div>
        </div>
      </div>
      <div class="auth-right">
        <h3>Secure Login</h3>
        <div style="display:flex;gap:4px;background:rgba(255,255,255,.05);border-radius:8px;padding:4px;margin-bottom:22px">
          <div class="login-tab active" id="lt-pwd" onclick="setLT('pwd',this)" style="flex:1;padding:8px;border-radius:6px;text-align:center;cursor:pointer;font-size:13px;font-weight:500;color:var(--white);background:var(--blue-bright)">Password</div>
          <div class="login-tab" id="lt-voice" onclick="setLT('voice',this)" style="flex:1;padding:8px;border-radius:6px;text-align:center;cursor:pointer;font-size:13px;font-weight:500;color:var(--gray)">Voice Biometric</div>
        </div>
        <div id="lf-pwd">
          <div class="form-group"><label>Account Number or Name</label><input type="text" id="li-id" placeholder="e.g. NB10001 or Rahul Sharma"></div>
          <div class="form-group"><label>Password</label><input type="password" id="li-pwd" placeholder="Enter password"></div>
          <button class="btn btn-primary btn-block" onclick="doLogin()" style="margin-top:6px">Login Securely ‚Üí</button>
        </div>
        <div id="lf-voice" style="display:none">
          <div style="text-align:center;padding:16px 0">
            <div class="auth-ring" onclick="voiceLogin()">üéôÔ∏è</div>
            <p style="color:var(--gray);font-size:14px;margin-top:10px">Say: "My name is [Name], open my account"</p>
            <button class="btn btn-primary btn-block" onclick="voiceLogin()" style="margin-top:16px">Start Voice Authentication</button>
          </div>
        </div>
        <div style="text-align:center;margin-top:16px;font-size:13px;color:var(--gray)">No account? <span style="color:var(--cyan);cursor:pointer" onclick="goto('signup')">Open one free</span></div>
        <div style="text-align:center;margin-top:8px;font-size:11px;color:var(--gray)">üîí 256-bit SSL | RBI Compliant</div>
      </div>
    </div>
  </div>
</div>

<!-- ===== DASHBOARD ===== -->
<div class="page" id="dashboard-page">
  <nav style="position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(10,22,40,.96);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 20px;height:70px;display:flex;align-items:center;justify-content:space-between">
    <div class="logo"><div class="logo-box">NB</div><span class="logo-text">Nova<span>Bharat</span> Bank</span></div>
    <div style="display:flex;align-items:center;gap:14px">
      <select class="lang-sel" onchange="setLang(this.value)">
        <option value="en">üåê EN</option>
        <option value="hi">‡§π‡§ø</option>
        <option value="mr">‡§Æ‡§∞</option>
        <option value="ta">‡Æ§</option>
      </select>
      <span id="dash-user-label" style="font-size:14px;font-weight:500"></span>
      <button class="btn btn-outline" style="font-size:12px;padding:7px 14px" onclick="openVP()">üé§ Voice</button>
      <button class="btn btn-danger" style="font-size:12px;padding:7px 14px" onclick="doLogout()">Logout</button>
    </div>
  </nav>
  <div class="dash-wrap">
    <div class="sidebar">
      <div class="sb-user">
        <div class="sb-avatar">üë§</div>
        <div class="sb-name" id="sb-name">‚Äî</div>
        <div class="sb-id" id="sb-accno">A/C: ‚Äî</div>
        <div class="sb-bal" id="sb-bal">‚Çπ ‚Äî</div>
        <div style="margin-top:6px"><span class="tag tag-success">KYC ‚úì</span></div>
      </div>
      <div class="nav-section">Overview</div>
      <div class="nav-item active" onclick="setSection('overview',this)"><span class="nav-icon">üè†</span>Dashboard</div>
      <div class="nav-section">Transactions</div>
      <div class="nav-item" onclick="setSection('transfer',this)"><span class="nav-icon">‚ÜóÔ∏è</span>Fund Transfer</div>
      <div class="nav-item" onclick="setSection('history',this)"><span class="nav-icon">üìã</span>Transaction History</div>
      <div class="nav-section">Banking</div>
      <div class="nav-item" onclick="setSection('cards',this)"><span class="nav-icon">üí≥</span>Card Management</div>
      <div class="nav-item" onclick="setSection('loans',this)"><span class="nav-icon">üè¶</span>Loan & EMI</div>
      <div class="nav-item" onclick="setSection('invest',this)"><span class="nav-icon">üìà</span>Investments</div>
      <div class="nav-section">AI Tools</div>
      <div class="nav-item" onclick="openVP()"><span class="nav-icon">üé§</span>AI Voice Banking</div>
      <div class="nav-section">Settings</div>
      <div class="nav-item" onclick="setSection('settings',this)"><span class="nav-icon">‚öôÔ∏è</span>Settings</div>
      <div class="nav-item" onclick="doLogout()"><span class="nav-icon">üö™</span>Logout</div>
    </div>

    <div class="dash-main">
      <!-- OVERVIEW -->
      <div class="sec-content active" id="sec-overview">
        <div class="dash-head"><h2 id="d-greet">Good Day!</h2><p id="d-date">Thursday, 27 February 2026</p></div>
        <div class="bal-cards">
          <div class="bal-card bc1"><div class="bc-ico">üí≥</div><div class="bc-lbl">Savings Account</div><div class="bc-amt" id="d-bal-main">‚Çπ0</div><div class="bc-sub" id="d-accno-disp">A/C ‚Äî</div></div>
          <div class="bal-card bc3"><div class="bc-ico">üöó</div><div class="bc-lbl">Car Loan Outstanding</div><div class="bc-amt">‚Çπ4,82,000</div><div class="bc-sub">EMI: ‚Çπ8,450 | Due: 5th Mar</div></div>
          <div class="bal-card bc2"><div class="bc-ico">üè¶</div><div class="bc-lbl">Fixed Deposit</div><div class="bc-amt">‚Çπ3,50,000</div><div class="bc-sub">8.25% p.a. | Matures Mar 2026</div></div>
          <div class="bal-card bc4"><div class="bc-ico">üìà</div><div class="bc-lbl">Credit Score</div><div class="bc-amt">782</div><div class="bc-sub">Excellent</div></div>
        </div>
        <div class="qa-grid">
          <div class="qa-btn" onclick="setSection('transfer',null)"><div class="qa-icon">‚ÜóÔ∏è</div><div class="qa-lbl" id="qa-1">Fund Transfer</div></div>
          <div class="qa-btn" onclick="toast('Bill payment launching soon!','ok')"><div class="qa-icon">üì±</div><div class="qa-lbl" id="qa-2">Pay Bills</div></div>
          <div class="qa-btn" onclick="toast('UPI QR generated!','ok')"><div class="qa-icon">üì≤</div><div class="qa-lbl">UPI / QR</div></div>
          <div class="qa-btn" onclick="openVP()"><div class="qa-icon">üé§</div><div class="qa-lbl" id="qa-4">Voice Banking</div></div>
        </div>
        <div class="chart-box">
          <div class="chart-title"><span id="chart-lbl">Spending Analytics (6 Months)</span><span class="tag tag-blue">AI Powered</span></div>
          <div class="chart-bars">
            <div class="c-bar" style="height:60%"></div><div class="c-bar" style="height:45%"></div>
            <div class="c-bar" style="height:75%"></div><div class="c-bar" style="height:55%"></div>
            <div class="c-bar" style="height:90%"></div><div class="c-bar" style="height:70%"></div>
          </div>
          <div style="display:flex;gap:18px;margin-top:8px;font-size:12px;color:var(--gray)"><span>Sep</span><span>Oct</span><span>Nov</span><span>Dec</span><span>Jan</span><span>Feb</span></div>
          <div style="margin-top:14px;padding:12px;background:rgba(245,158,11,.08);border-radius:8px;font-size:13px;color:var(--gold)" id="ai-tip">üí° AI Insight: Your spending increased 28% in January. Consider setting a monthly budget.</div>
        </div>
        <div class="table-wrap">
          <div class="table-head"><span id="txn-recent-lbl">Recent Transactions</span><span class="tag tag-blue" style="cursor:pointer" onclick="setSection('history',null)">View All</span></div>
          <table><thead><tr><th>Date</th><th>Description</th><th>Type</th><th>Amount</th><th>Balance</th></tr></thead>
          <tbody id="recent-txn-body"></tbody></table>
        </div>
      </div>

      <!-- TRANSFER -->
      <div class="sec-content" id="sec-transfer">
        <div class="dash-head"><h2 id="tf-title">Fund Transfer</h2><p id="tf-sub">Transfer money securely with AI fraud protection</p></div>
        <div style="background:linear-gradient(135deg,rgba(16,185,129,.08),rgba(16,185,129,.03));border:1px solid rgba(16,185,129,.2);border-radius:12px;padding:14px 18px;display:flex;align-items:center;gap:12px;margin-bottom:20px">
          <span style="font-size:20px">üõ°Ô∏è</span>
          <div><div style="font-weight:600;font-size:14px;color:var(--success)">AI Fraud Protection Active</div><div style="font-size:12px;color:var(--gray)">Every transfer monitored in real-time. Voice biometric + PIN required.</div></div>
        </div>
        <div class="form-box">
          <h3 id="tf-h">Transfer Details</h3>
          <div style="display:flex;gap:8px;margin-bottom:20px">
            <button class="btn btn-primary" id="tb-neft" onclick="setTT('NEFT')" style="font-size:13px">NEFT</button>
            <button class="btn btn-outline" id="tb-imps" onclick="setTT('IMPS')" style="font-size:13px">IMPS</button>
            <button class="btn btn-outline" id="tb-upi" onclick="setTT('UPI')" style="font-size:13px">UPI</button>
          </div>
          <div class="form-row">
            <div class="form-group"><label id="tf-ben-lbl">Beneficiary Name / Account No</label><input type="text" id="tf-ben" placeholder="Name or Account Number"></div>
            <div class="form-group"><label id="tf-amt-lbl">Amount (‚Çπ)</label><input type="number" id="tf-amt" placeholder="Enter amount"></div>
          </div>
          <div class="form-row">
            <div class="form-group"><label>IFSC Code</label><input type="text" id="tf-ifsc" placeholder="e.g. NVBK0001234" value="NVBK0001234"></div>
            <div class="form-group"><label>Remarks</label><input type="text" id="tf-remark" placeholder="Optional note"></div>
          </div>
          <button class="btn btn-primary" style="margin-top:12px;padding:13px 28px;font-size:15px" onclick="startTransfer()" id="tf-proceed">üîê Proceed with PIN Verification</button>
        </div>
        <div style="padding:16px;background:rgba(37,99,235,.08);border:1px solid rgba(37,99,235,.2);border-radius:12px;font-size:13px;color:var(--gray)">
          <strong style="color:var(--cyan)">üé§ Voice Command:</strong> Say <em>"Transfer 5000 to Rahul Sharma"</em> or <em>"Send ‚Çπ2000 to account NB10003"</em> in the Voice Banking panel.
        </div>
      </div>

      <!-- HISTORY -->
      <div class="sec-content" id="sec-history">
        <div class="dash-head"><h2 id="hist-title">Transaction History</h2><p>Complete statement</p></div>
        <div style="display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap">
          <select style="padding:9px;background:var(--navy-mid);border:1px solid var(--border);border-radius:8px;color:var(--white)"><option>All Transactions</option><option>Credits</option><option>Debits</option></select>
          <button class="btn btn-primary" style="font-size:13px" onclick="toast('Statement downloaded!','ok')">üì• Download PDF</button>
          <button class="btn btn-outline" style="font-size:13px" onclick="toast('Exported to CSV!','ok')">üìä Export CSV</button>
        </div>
        <div class="table-wrap">
          <table><thead><tr><th>Date</th><th>Description</th><th>Mode</th><th>Amount</th><th>Balance</th><th>Status</th></tr></thead>
          <tbody id="full-txn-body"></tbody></table>
        </div>
      </div>

      <!-- CARDS -->
      <div class="sec-content" id="sec-cards">
        <div class="dash-head"><h2>Card Management</h2></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px">
          <div style="background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);border-radius:20px;padding:28px;border:1px solid rgba(255,255,255,.1)">
            <div style="display:flex;justify-content:space-between;margin-bottom:28px"><span class="logo-text" style="font-size:15px">Nova<span>Bharat</span></span><span style="font-size:26px">üì°</span></div>
            <div style="font-family:'Rajdhani',sans-serif;font-size:18px;letter-spacing:3px;margin-bottom:18px">4729 ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 8821</div>
            <div style="display:flex;justify-content:space-between;font-size:12px;opacity:.7"><div><div>HOLDER</div><div id="card-name" style="font-size:13px;opacity:1;font-weight:600;margin-top:2px">‚Äî</div></div><div><div>EXPIRES</div><div style="font-size:13px;opacity:1;font-weight:600;margin-top:2px">09/28</div></div><div style="font-size:22px">VISA</div></div>
            <div style="margin-top:12px"><span class="tag tag-success">Active</span></div>
          </div>
          <div style="display:flex;flex-direction:column;gap:10px">
            <div class="emi-card">
              <div class="emi-row"><span class="emi-key">Daily Limit</span><span>‚Çπ50,000</span></div>
              <div class="emi-row"><span class="emi-key">International</span><span class="tag tag-success">Enabled</span></div>
              <div class="emi-row"><span class="emi-key">Online Txns</span><span class="tag tag-success">Enabled</span></div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
              <button class="btn btn-danger" style="font-size:13px;padding:11px" onclick="toast('Card blocked! Contact support to unblock.','err')">üî¥ Block Card</button>
              <button class="btn btn-outline" style="font-size:13px;padding:11px" onclick="toast('PIN change OTP sent.','ok')">üîë Change PIN</button>
              <button class="btn btn-outline" style="font-size:13px;padding:11px" onclick="toast('Limit updated!','ok')">üìä Set Limit</button>
              <button class="btn btn-success" style="font-size:13px;padding:11px" onclick="toast('New card requested! ETA: 3-5 days','ok')">üÜï New Card</button>
            </div>
          </div>
        </div>
      </div>

      <!-- LOANS -->
      <div class="sec-content" id="sec-loans">
        <div class="dash-head"><h2>Loan & EMI</h2></div>
        <div class="emi-card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
            <div><div style="font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700">Car Loan</div><div style="font-size:12px;color:var(--gray)">Loan ID: NVBL2024CAR001</div></div>
            <span class="tag tag-success">Active</span>
          </div>
          <div class="emi-row"><span class="emi-key">Principal</span><span>‚Çπ6,00,000</span></div>
          <div class="emi-row"><span class="emi-key">Outstanding</span><span style="color:var(--warning)">‚Çπ4,82,000</span></div>
          <div class="emi-row"><span class="emi-key">Rate</span><span>9.20% p.a.</span></div>
          <div class="emi-row"><span class="emi-key">Monthly EMI</span><span style="color:var(--cyan);font-weight:600">‚Çπ8,450</span></div>
          <div class="emi-row"><span class="emi-key">Next Due</span><span style="color:var(--warning)">5 March 2026</span></div>
          <div style="margin-top:14px"><div style="display:flex;justify-content:space-between;font-size:12px;color:var(--gray);margin-bottom:6px"><span>Repayment Progress</span><span>20%</span></div><div class="prog"><div class="prog-fill" style="width:20%"></div></div></div>
          <div style="display:flex;gap:10px;margin-top:14px;flex-wrap:wrap">
            <button class="btn btn-primary" onclick="toast('EMI ‚Çπ8,450 paid via NEFT!','ok')">üí≥ Pay EMI</button>
            <button class="btn btn-outline" onclick="toast('EMI schedule sent to email.','ok')">üìÖ Schedule</button>
          </div>
        </div>
      </div>

      <!-- INVESTMENTS -->
      <div class="sec-content" id="sec-invest">
        <div class="dash-head"><h2>Investments</h2></div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:20px">
          <div class="bal-card bc2" style="padding:20px"><div class="bc-lbl">Fixed Deposit</div><div class="bc-amt">‚Çπ3,50,000</div><div class="bc-sub">8.25% | Matures Mar 2026</div></div>
          <div class="bal-card bc4" style="padding:20px"><div class="bc-lbl">Recurring Deposit</div><div class="bc-amt">‚Çπ72,000</div><div class="bc-sub">‚Çπ6,000/mo | 7.80% p.a.</div></div>
          <div class="bal-card bc3" style="padding:20px"><div class="bc-lbl">Portfolio Value</div><div class="bc-amt">‚Çπ4,22,000</div><div class="bc-sub">Est. returns: ‚Çπ68,000</div></div>
        </div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn btn-primary" onclick="toast('New FD opened! Certificate sent.','ok')">üìã Open FD</button>
          <button class="btn btn-outline" onclick="toast('RD mandate registered!','ok')">üîÑ Start RD</button>
        </div>
      </div>

      <!-- SETTINGS -->
      <div class="sec-content" id="sec-settings">
        <div class="dash-head"><h2>Settings</h2></div>
        <div class="form-box">
          <h3>Profile</h3>
          <div class="form-row">
            <div class="form-group"><label>Full Name</label><input id="set-name" type="text"></div>
            <div class="form-group"><label>Mobile</label><input id="set-phone" type="tel"></div>
          </div>
          <div class="form-group"><label>Address</label><input id="set-addr" type="text"></div>
          <button class="btn btn-primary" onclick="saveProfile()">Save Changes</button>
        </div>
        <div class="form-box">
          <h3>Security</h3>
          <div style="display:flex;flex-direction:column;gap:12px">
            <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--surface);border-radius:10px;border:1px solid var(--border)">
              <div><div style="font-weight:500;font-size:14px">Voice Biometric Auth</div><div style="font-size:12px;color:var(--gray)">Voice as login credential</div></div>
              <div id="voice-toggle" style="width:44px;height:24px;background:var(--blue-bright);border-radius:50px;padding:3px;cursor:pointer;display:flex;align-items:center;justify-content:flex-end" onclick="toggleVoiceBio()"><div style="width:18px;height:18px;background:#fff;border-radius:50%"></div></div>
            </div>
          </div>
          <button class="btn btn-outline" style="margin-top:14px;font-size:13px" onclick="toast('PIN change OTP sent to registered mobile.','ok')">üîë Change Transaction PIN</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== ADMIN LOGIN ===== -->
<div class="page" id="admin-login-page">
  <div class="auth-wrap">
    <div class="auth-box" style="max-width:400px;border-color:rgba(239,68,68,.3)">
      <div style="text-align:center;margin-bottom:24px"><div style="font-size:40px">üîê</div><h2 style="font-size:26px">Admin Portal</h2><div style="color:var(--gray);font-size:13px;margin-top:4px">Internal access only</div></div>
      <div class="form-group"><label>Admin ID</label><input id="adm-id" value="ADMIN001" type="text"></div>
      <div class="form-group"><label>Password</label><input id="adm-pwd" type="password" value="admin123"></div>
      <button class="btn btn-danger btn-block" onclick="adminLogin()">Access Admin Panel</button>
      <button class="btn btn-outline btn-block" style="margin-top:8px" onclick="goto('home')">‚Üê Back</button>
    </div>
  </div>
</div>

<!-- ===== ADMIN DASHBOARD ===== -->
<div class="page" id="admin-page">
  <nav style="position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(20,8,8,.97);backdrop-filter:blur(20px);border-bottom:1px solid rgba(239,68,68,.2);padding:0 20px;height:70px;display:flex;align-items:center;justify-content:space-between">
    <div style="display:flex;align-items:center;gap:10px"><div style="width:36px;height:36px;background:linear-gradient(135deg,#dc2626,#ef4444);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:14px">üîê</div><span style="font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700">NovaBharat Admin</span></div>
    <div style="display:flex;gap:10px"><span class="tag tag-danger">ADMIN</span><button class="btn btn-outline" style="font-size:12px;padding:7px 14px" onclick="goto('home')">Exit Admin</button></div>
  </nav>
  <div style="padding:90px 24px 40px">
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:20px;margin-bottom:28px">
      <div style="background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px"><div style="font-family:'Rajdhani',sans-serif;font-size:34px;font-weight:700;color:var(--cyan)" id="adm-cust-count">20</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Total Customers</div></div>
      <div style="background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px"><div style="font-family:'Rajdhani',sans-serif;font-size:34px;font-weight:700;color:var(--gold)">‚Çπ4.2L Cr</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Total Deposits</div></div>
      <div style="background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px"><div style="font-family:'Rajdhani',sans-serif;font-size:34px;font-weight:700;color:var(--danger)" id="adm-fraud-count">3</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Fraud Alerts</div></div>
      <div style="background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:20px"><div style="font-family:'Rajdhani',sans-serif;font-size:34px;font-weight:700;color:var(--success)">99.4%</div><div style="font-size:12px;color:var(--gray);margin-top:4px">Voice Auth Accuracy</div></div>
    </div>
    <div class="table-wrap" style="margin-bottom:24px">
      <div class="table-head"><span>All Customer Accounts</span></div>
      <div style="max-height:400px;overflow-y:auto">
        <table><thead><tr><th>Account No</th><th>Name</th><th>Balance</th><th>Phone</th><th>Status</th><th>Actions</th></tr></thead>
        <tbody id="adm-customers"></tbody></table>
      </div>
    </div>
    <div class="table-wrap">
      <div class="table-head"><span>All Transactions</span></div>
      <div style="max-height:300px;overflow-y:auto">
        <table><thead><tr><th>Date</th><th>From</th><th>To</th><th>Amount</th><th>Type</th><th>Status</th></tr></thead>
        <tbody id="adm-txns"></tbody></table>
      </div>
    </div>
  </div>
</div>

<!-- ===== PIN CONFIRM MODAL ===== -->
<div class="overlay" id="pin-modal">
  <div class="modal" style="max-width:380px">
    <h3>üîë Confirm Transaction PIN</h3>
    <p id="pin-modal-desc">Enter your 4-digit PIN to authorize this transfer.</p>
    <div class="step-list" id="pin-step-list"></div>
    <div class="pin-modal-body">
      <div class="pin-row" style="justify-content:center;margin:16px 0">
        <input class="pin-inp" type="password" maxlength="1" id="cp1" oninput="pinNav(this,'cp2')">
        <input class="pin-inp" type="password" maxlength="1" id="cp2" oninput="pinNav(this,'cp3')">
        <input class="pin-inp" type="password" maxlength="1" id="cp3" oninput="pinNav(this,'cp4')">
        <input class="pin-inp" type="password" maxlength="1" id="cp4">
      </div>
    </div>
    <div style="display:flex;gap:10px;margin-top:8px">
      <button class="btn btn-primary" style="flex:1" onclick="confirmPIN()">Confirm Transfer</button>
      <button class="btn btn-outline" onclick="document.getElementById('pin-modal').classList.remove('show')">Cancel</button>
    </div>
  </div>
</div>

<!-- ===== FLOATING VOICE + PANEL ===== -->
<button class="float-mic" onclick="openVP()">üé§</button>
<div class="voice-panel" id="voice-panel">
  <div class="vp-head">
    <div><div class="vp-title">ü§ñ Nova AI Voice Banking</div><div style="font-size:11px;color:var(--success)">‚óè Online | Voice + Text</div></div>
    <button class="vp-close" onclick="closeVP()">‚úï</button>
  </div>
  <div class="vp-lang-bar">
    <button class="vpl-btn active" onclick="vpLang(this,'en')">EN</button>
    <button class="vpl-btn" onclick="vpLang(this,'hi')">‡§π‡§ø</button>
    <button class="vpl-btn" onclick="vpLang(this,'mr')">‡§Æ‡§∞</button>
    <button class="vpl-btn" onclick="vpLang(this,'ta')">‡Æ§</button>
  </div>
  <div class="vp-msgs" id="vp-msgs"></div>
  <div id="vp-emo"></div>
  <div class="vp-inp-row">
    <input class="vp-inp" id="vp-inp" placeholder="Type or press mic..." onkeypress="e=>e.key==='Enter'&&vpSend()">
    <button class="vp-mic-btn" onclick="vpMic()">üé§</button>
  </div>
</div>

<script>
/* ====================================================
   DATABASE  ‚Äî 20 dummy customers + new signups
   ==================================================== */
const DB = {
  customers: [
    { accNo:"NB10001", name:"Rajesh Sharma",     phone:"+91 9876543210", dob:"1985-06-15", addr:"304 Oberoi Gardens, Mumbai - 400053", balance:124562.80, pin:"1234", password:"pass123", lang:"en", txns:[] },
    { accNo:"NB10002", name:"Priya Deshmukh",    phone:"+91 9876543211", dob:"1990-03-22", addr:"12 Shivaji Nagar, Pune - 411005",     balance:87450.00,  pin:"5678", password:"pass123", lang:"mr", txns:[] },
    { accNo:"NB10003", name:"Rahul Kumar",        phone:"+91 9876543212", dob:"1988-11-10", addr:"56 Gandhi Road, Delhi - 110001",      balance:210000.00, pin:"2345", password:"pass123", lang:"hi", txns:[] },
    { accNo:"NB10004", name:"Anita Pillai",       phone:"+91 9876543213", dob:"1993-07-18", addr:"88 Anna Salai, Chennai - 600002",     balance:45230.50,  pin:"6789", password:"pass123", lang:"ta", txns:[] },
    { accNo:"NB10005", name:"Suresh Patil",       phone:"+91 9876543214", dob:"1975-12-05", addr:"22 MG Road, Nagpur - 440001",         balance:320000.00, pin:"3456", password:"pass123", lang:"mr", txns:[] },
    { accNo:"NB10006", name:"Meena Iyer",         phone:"+91 9876543215", dob:"1992-09-30", addr:"45 Besant Nagar, Chennai - 600090",   balance:62000.00,  pin:"7890", password:"pass123", lang:"ta", txns:[] },
    { accNo:"NB10007", name:"Amit Singh",         phone:"+91 9876543216", dob:"1987-04-14", addr:"78 Civil Lines, Lucknow - 226001",    balance:155000.00, pin:"4567", password:"pass123", lang:"hi", txns:[] },
    { accNo:"NB10008", name:"Kavitha Reddy",      phone:"+91 9876543217", dob:"1995-01-25", addr:"33 Jubilee Hills, Hyderabad - 500033",balance:93200.00,  pin:"8901", password:"pass123", lang:"en", txns:[] },
    { accNo:"NB10009", name:"Deepak Nair",        phone:"+91 9876543218", dob:"1983-08-09", addr:"19 MG Road, Kochi - 682016",          balance:480000.00, pin:"1357", password:"pass123", lang:"en", txns:[] },
    { accNo:"NB10010", name:"Sunita Gupta",       phone:"+91 9876543219", dob:"1978-05-20", addr:"67 Ashram Road, Ahmedabad - 380009",  balance:75600.00,  pin:"2468", password:"pass123", lang:"hi", txns:[] },
    { accNo:"NB10011", name:"Vikram Patel",       phone:"+91 9876543220", dob:"1991-10-11", addr:"102 Navrangpura, Ahmedabad - 380009", balance:138000.00, pin:"1122", password:"pass123", lang:"en", txns:[] },
    { accNo:"NB10012", name:"Lavanya Krishnan",   phone:"+91 9876543221", dob:"1994-02-28", addr:"55 T Nagar, Chennai - 600017",        balance:51000.00,  pin:"3344", password:"pass123", lang:"ta", txns:[] },
    { accNo:"NB10013", name:"Mohan Joshi",        phone:"+91 9876543222", dob:"1969-07-07", addr:"8 Tilak Road, Pune - 411002",         balance:695000.00, pin:"5566", password:"pass123", lang:"mr", txns:[] },
    { accNo:"NB10014", name:"Pooja Yadav",        phone:"+91 9876543223", dob:"1997-12-15", addr:"29 Gomti Nagar, Lucknow - 226010",    balance:34500.00,  pin:"7788", password:"pass123", lang:"hi", txns:[] },
    { accNo:"NB10015", name:"Arjun Menon",        phone:"+91 9876543224", dob:"1986-03-03", addr:"77 Palayam, Thiruvananthapuram - 695034", balance:270000.00, pin:"9900", password:"pass123", lang:"en", txns:[] },
    { accNo:"NB10016", name:"Rekha Bansal",       phone:"+91 9876543225", dob:"1980-09-17", addr:"44 Chandni Chowk, Delhi - 110006",    balance:117000.00, pin:"1212", password:"pass123", lang:"hi", txns:[] },
    { accNo:"NB10017", name:"Karthik Sundaram",   phone:"+91 9876543226", dob:"1993-06-22", addr:"61 Coimbatore Main Rd, Coimbatore - 641001", balance:88900.00, pin:"3434", password:"pass123", lang:"ta", txns:[] },
    { accNo:"NB10018", name:"Neha Wagh",          phone:"+91 9876543227", dob:"1996-11-30", addr:"15 FC Road, Pune - 411004",           balance:43700.00,  pin:"5656", password:"pass123", lang:"mr", txns:[] },
    { accNo:"NB10019", name:"Ganesh Rao",         phone:"+91 9876543228", dob:"1974-04-19", addr:"39 Indiranagar, Bengaluru - 560038",  balance:520000.00, pin:"7878", password:"pass123", lang:"en", txns:[] },
    { accNo:"NB10020", name:"Divya Sharma",       phone:"+91 9876543229", dob:"1998-08-08", addr:"23 Banjara Hills, Hyderabad - 500034",balance:29800.00,  pin:"9090", password:"pass123", lang:"hi", txns:[] },
  ],
  transactions: [],
  nextAccNo: 10021,

  findCustomer(query) {
    const q = query.trim().toLowerCase();
    return this.customers.find(c =>
      c.accNo.toLowerCase() === q ||
      c.name.toLowerCase() === q ||
      c.name.toLowerCase().includes(q)
    );
  },
  saveToStorage() {
    try { localStorage.setItem('nb_db', JSON.stringify({ customers: this.customers, transactions: this.transactions, nextAccNo: this.nextAccNo })); } catch(e) {}
  },
  loadFromStorage() {
    try {
      const d = localStorage.getItem('nb_db');
      if(d) { const p = JSON.parse(d); this.customers = p.customers; this.transactions = p.transactions; this.nextAccNo = p.nextAccNo; }
    } catch(e) {}
  }
};

/* ====================================================
   SEED DUMMY TRANSACTIONS
   ==================================================== */
function seedTxns() {
  if(DB.transactions.length > 0) return;
  const descs = ['Salary Credit','Amazon Shopping','Swiggy Food','ATM Withdrawal','NEFT Transfer','UPI Payment','EMI Payment','Electricity Bill','Mobile Recharge'];
  DB.customers.forEach(c => {
    let bal = c.balance + 50000;
    for(let i = 0; i < 6; i++) {
      const isCredit = i === 0;
      const amt = isCredit ? 85000 : Math.floor(Math.random()*8000 + 500);
      bal = isCredit ? bal + amt : bal - amt;
      const d = new Date(); d.setDate(d.getDate() - (i * 5));
      c.txns.push({ date: d.toLocaleDateString('en-IN'), desc: descs[Math.floor(Math.random()*descs.length)], mode: ['NEFT','UPI','ATM','Net Banking'][i%4], amount: amt, type: isCredit ? 'CR' : 'DR', balance: Math.max(bal,0), status:'Success' });
    }
    c.txns.sort((a,b) => new Date(b.date) - new Date(a.date));
  });
}

/* ====================================================
   SESSION
   ==================================================== */
let session = { user: null, lang: 'en' };

function getUser() { return session.user; }

/* ====================================================
   PAGE NAVIGATION
   ==================================================== */
function goto(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(page + '-page').classList.add('active');
  window.scrollTo(0, 0);
  // Show/hide public nav
  document.getElementById('pub-nav').style.display = (page === 'dashboard' || page === 'admin') ? 'none' : 'flex';
  if (page === 'dashboard') refreshDash();
  if (page === 'admin') refreshAdmin();
}

/* ====================================================
   SIGNUP
   ==================================================== */
function doSignup() {
  const name = document.getElementById('su-name').value.trim();
  const phone = document.getElementById('su-phone').value.trim();
  const dob = document.getElementById('su-dob').value;
  const addr = document.getElementById('su-addr').value.trim();
  const pwd = document.getElementById('su-pwd').value;
  const pwd2 = document.getElementById('su-pwd2').value;
  const lang = document.getElementById('su-lang').value;
  const pin = ['pin1','pin2','pin3','pin4'].map(id => document.getElementById(id).value).join('');

  if(!name||!phone||!dob||!addr||!pwd) { toast(T('fill_all'),'err'); return; }
  if(pwd !== pwd2) { toast(T('pwd_mismatch'),'err'); return; }
  if(pin.length !== 4 || isNaN(pin)) { toast(T('pin_invalid'),'err'); return; }
  if(DB.customers.find(c => c.name.toLowerCase() === name.toLowerCase())) { toast('Name already registered. Try logging in.','err'); return; }

  const accNo = 'NB' + DB.nextAccNo++;
  const newCust = {
    accNo, name, phone, dob, addr, balance: 10000, // welcome bonus ‚Çπ10,000
    pin, password: pwd, lang,
    txns: [{ date: new Date().toLocaleDateString('en-IN'), desc:'Account Opening Bonus', mode:'CREDIT', amount:10000, type:'CR', balance:10000, status:'Success' }]
  };
  DB.customers.push(newCust);
  DB.saveToStorage();

  toast(`‚úÖ Account created! Your Account No: ${accNo}. ‚Çπ10,000 welcome bonus added.`, 'ok');
  setTimeout(() => {
    session.user = newCust;
    session.lang = lang;
    goto('dashboard');
    vpAddMsg(T('welcome_msg', name), 'ai');
  }, 1500);
}

/* ====================================================
   LOGIN
   ==================================================== */
function doLogin() {
  const id = document.getElementById('li-id').value.trim();
  const pwd = document.getElementById('li-pwd').value;
  if(!id || !pwd) { toast(T('fill_all'),'err'); return; }
  const cust = DB.findCustomer(id);
  if(!cust) { toast(T('not_found'),'err'); return; }
  if(cust.password !== pwd) { toast(T('wrong_pwd'),'err'); return; }
  session.user = cust;
  session.lang = cust.lang || 'en';
  document.getElementById('global-lang').value = session.lang;
  toast(T('login_ok', cust.name), 'ok');
  setTimeout(() => goto('dashboard'), 800);
}

function voiceLogin() {
  toast('üéôÔ∏è Listening for voice authentication...', 'ok');
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SR) { toast('Voice auth not supported. Use Chrome browser.','err'); return; }
  const r = new SR();
  r.lang = 'en-IN';
  r.onresult = (e) => {
    const spoken = e.results[0][0].transcript.toLowerCase();
    const found = DB.customers.find(c => spoken.includes(c.name.toLowerCase().split(' ')[0].toLowerCase()));
    if(found) {
      session.user = found;
      toast(`‚úÖ Voice matched: ${found.name} | Login successful!`, 'ok');
      setTimeout(() => goto('dashboard'), 800);
    } else {
      toast('Voice not matched. Please try password login.','err');
    }
  };
  r.onerror = () => toast('Voice capture failed. Try password login.','err');
  r.start();
}

function setLT(tab, el) {
  document.querySelectorAll('.login-tab').forEach(t => { t.style.background=''; t.style.color='var(--gray)'; });
  el.style.background='var(--blue-bright)'; el.style.color='#fff';
  document.getElementById('lf-pwd').style.display = tab==='pwd'?'block':'none';
  document.getElementById('lf-voice').style.display = tab==='voice'?'block':'none';
}

function doLogout() {
  session.user = null;
  toast('Logged out securely.', 'ok');
  goto('home');
}

/* ====================================================
   ADMIN
   ==================================================== */
function adminLogin() {
  const id = document.getElementById('adm-id').value;
  const pwd = document.getElementById('adm-pwd').value;
  if(id==='ADMIN001' && pwd==='admin123') goto('admin');
  else toast('Invalid admin credentials.','err');
}

function refreshAdmin() {
  const tbody = document.getElementById('adm-customers');
  tbody.innerHTML = DB.customers.map(c => `
    <tr>
      <td>${c.accNo}</td><td>${c.name}</td>
      <td class="cr">‚Çπ${c.balance.toLocaleString('en-IN')}</td>
      <td>${c.phone}</td>
      <td><span class="tag tag-success">Active</span></td>
      <td><button class="btn btn-outline" style="font-size:11px;padding:4px 10px" onclick="toast('Viewing ${c.accNo}','ok')">View</button></td>
    </tr>`).join('');
  document.getElementById('adm-cust-count').textContent = DB.customers.length;

  const ttbody = document.getElementById('adm-txns');
  ttbody.innerHTML = DB.transactions.slice(-20).reverse().map(t => `
    <tr>
      <td>${t.date}</td><td>${t.from}</td><td>${t.to}</td>
      <td class="${t.amount>0?'cr':'dr'}">‚Çπ${Math.abs(t.amount).toLocaleString('en-IN')}</td>
      <td>${t.mode}</td>
      <td><span class="tag tag-success">Success</span></td>
    </tr>`).join('') || '<tr><td colspan="6" style="color:var(--gray);text-align:center;padding:20px">No transactions yet.</td></tr>';
}

/* ====================================================
   DASHBOARD
   ==================================================== */
function refreshDash() {
  const u = getUser(); if(!u) return;
  document.getElementById('sb-name').textContent = u.name;
  document.getElementById('sb-accno').textContent = 'A/C: ' + u.accNo;
  document.getElementById('sb-bal').textContent = '‚Çπ' + u.balance.toLocaleString('en-IN');
  document.getElementById('d-greet').textContent = T('greet', u.name);
  document.getElementById('d-date').textContent = new Date().toLocaleDateString('en-IN',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
  document.getElementById('d-bal-main').textContent = '‚Çπ' + u.balance.toLocaleString('en-IN');
  document.getElementById('d-accno-disp').textContent = 'A/C ' + u.accNo;
  document.getElementById('dash-user-label').textContent = u.name;
  document.getElementById('card-name').textContent = u.name.toUpperCase();

  // Recent txns
  const rb = document.getElementById('recent-txn-body');
  rb.innerHTML = (u.txns||[]).slice(0,5).map(t => `<tr>
    <td>${t.date}</td><td>${t.desc}</td>
    <td><span class="tag ${t.type==='CR'?'tag-success':'tag-danger'}">${t.type==='CR'?'Credit':'Debit'}</span></td>
    <td class="${t.type==='CR'?'cr':'dr'}">${t.type==='CR'?'+':'-'}‚Çπ${t.amount.toLocaleString('en-IN')}</td>
    <td>‚Çπ${t.balance.toLocaleString('en-IN')}</td>
  </tr>`).join('') || '<tr><td colspan="5" style="color:var(--gray);text-align:center;padding:16px">No transactions yet.</td></tr>';

  // Full history
  const fb = document.getElementById('full-txn-body');
  fb.innerHTML = (u.txns||[]).map(t => `<tr>
    <td>${t.date}</td><td>${t.desc}</td><td>${t.mode}</td>
    <td class="${t.type==='CR'?'cr':'dr'}">${t.type==='CR'?'+':'-'}‚Çπ${t.amount.toLocaleString('en-IN')}</td>
    <td>‚Çπ${t.balance.toLocaleString('en-IN')}</td>
    <td><span class="tag tag-success">${t.status}</span></td>
  </tr>`).join('') || '<tr><td colspan="6" style="color:var(--gray);text-align:center;padding:16px">No transactions yet.</td></tr>';

  // Settings
  document.getElementById('set-name').value = u.name;
  document.getElementById('set-phone').value = u.phone;
  document.getElementById('set-addr').value = u.addr;

  applyLangUI();
}

function setSection(name, el) {
  document.querySelectorAll('.sec-content').forEach(s => s.classList.remove('active'));
  const s = document.getElementById('sec-' + name);
  if(s) s.classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  if(el) el.classList.add('active');
  if(name==='history') refreshDash();
}

function saveProfile() {
  const u = getUser(); if(!u) return;
  u.name = document.getElementById('set-name').value;
  u.phone = document.getElementById('set-phone').value;
  u.addr = document.getElementById('set-addr').value;
  DB.saveToStorage();
  toast(T('saved'),'ok');
  refreshDash();
}

/* ====================================================
   FUND TRANSFER
   ==================================================== */
let pendingTransfer = null;
let transferMode = 'NEFT';

function setTT(mode) {
  transferMode = mode;
  ['NEFT','IMPS','UPI'].forEach(m => {
    document.getElementById('tb-'+m.toLowerCase()).className = 'btn ' + (m===mode ? 'btn-primary' : 'btn-outline');
  });
}

function startTransfer() {
  const u = getUser(); if(!u) { toast('Please login first.','err'); return; }
  const ben = document.getElementById('tf-ben').value.trim();
  const amt = parseFloat(document.getElementById('tf-amt').value);
  if(!ben) { toast(T('fill_ben'),'err'); return; }
  if(!amt || amt <= 0) { toast(T('fill_amt'),'err'); return; }
  if(amt > u.balance) { toast(T('low_bal'),'err'); return; }

  const receiver = DB.findCustomer(ben);
  if(!receiver && transferMode !== 'UPI') { toast(T('ben_not_found'),'err'); return; }

  pendingTransfer = { receiver, ben, amt, mode: transferMode };
  document.getElementById('pin-modal-desc').textContent = T('pin_confirm', amt, ben);
  document.getElementById('pin-step-list').innerHTML = `
    <div class="step"><div class="step-n done">‚úì</div>Fraud risk check: LOW</div>
    <div class="step"><div class="step-n done">‚úì</div>Amount: ‚Çπ${amt.toLocaleString('en-IN')} | Mode: ${transferMode}</div>
    <div class="step"><div class="step-n">3</div>Enter 4-digit PIN to confirm</div>`;
  ['cp1','cp2','cp3','cp4'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('pin-modal').classList.add('show');
  setTimeout(() => document.getElementById('cp1').focus(), 200);
}

function confirmPIN() {
  const u = getUser(); if(!u || !pendingTransfer) return;
  const pin = ['cp1','cp2','cp3','cp4'].map(id => document.getElementById(id).value).join('');
  if(pin.length !== 4) { toast(T('enter_pin'),'err'); return; }
  if(pin !== u.pin) { toast(T('wrong_pin'),'err'); return; }

  const { receiver, ben, amt, mode } = pendingTransfer;
  const now = new Date().toLocaleDateString('en-IN');

  // Deduct from sender
  u.balance -= amt;
  u.txns.unshift({ date: now, desc: `Transfer to ${receiver ? receiver.name : ben}`, mode, amount: amt, type:'DR', balance: u.balance, status:'Success' });

  // Credit receiver if within bank
  if(receiver) {
    receiver.balance += amt;
    receiver.txns.unshift({ date: now, desc: `Received from ${u.name}`, mode, amount: amt, type:'CR', balance: receiver.balance, status:'Success' });
  }

  DB.transactions.push({ date: now, from: u.accNo, to: receiver ? receiver.accNo : ben, amount: amt, mode, status:'Success' });
  DB.saveToStorage();

  document.getElementById('pin-modal').classList.remove('show');
  pendingTransfer = null;
  ['tf-ben','tf-amt','tf-remark'].forEach(id => { const el=document.getElementById(id); if(el) el.value=''; });
  refreshDash();
  toast(`‚úÖ ‚Çπ${amt.toLocaleString('en-IN')} transferred successfully to ${receiver ? receiver.name : ben} via ${mode}!`, 'ok');
  vpAddMsg(T('transfer_success', amt, receiver ? receiver.name : ben), 'ai');
}

/* ====================================================
   MULTILINGUAL TRANSLATIONS
   ==================================================== */
const STRINGS = {
  en: {
    greet: n => `Good Day, ${n}! üëã`,
    fill_all: 'Please fill all required fields.',
    pwd_mismatch: 'Passwords do not match.',
    pin_invalid: 'Please enter a valid 4-digit PIN.',
    not_found: 'Account not found. Check name or account number.',
    wrong_pwd: 'Incorrect password. Please try again.',
    login_ok: n => `‚úÖ Welcome back, ${n}!`,
    saved: 'Changes saved successfully!',
    fill_ben: 'Please enter beneficiary name or account number.',
    fill_amt: 'Please enter a valid transfer amount.',
    low_bal: 'Insufficient balance for this transfer.',
    ben_not_found: 'Beneficiary not found. Check name or account number.',
    pin_confirm: (amt, ben) => `Transfer ‚Çπ${amt.toLocaleString('en-IN')} to ${ben}. Enter your PIN to authorize.`,
    enter_pin: 'Please enter your 4-digit PIN.',
    wrong_pin: 'Incorrect PIN. Please try again.',
    transfer_success: (amt, ben) => `‚úÖ Transfer of ‚Çπ${amt.toLocaleString('en-IN')} to ${ben} was successful!`,
    welcome_msg: n => `Welcome ${n}! Your account is ready. Say "check balance" or "transfer funds" anytime.`,
    // Voice chatbot
    v_bal: (n, b) => `Your current balance is ‚Çπ${b.toLocaleString('en-IN')}. Account: ${n}`,
    v_txn: (txns) => `Last 5 transactions:\n` + txns.slice(0,5).map(t => `‚Ä¢ ${t.type==='CR'?'+':'-'}‚Çπ${t.amount.toLocaleString('en-IN')} ‚Äî ${t.desc} (${t.date})`).join('\n'),
    v_login_req: 'Please login first to access your account details.',
    v_transfer_ask_amount: 'How much would you like to transfer, and to whom?',
    v_greet: 'Hello! I\'m Nova, your AI banking assistant. Ask me about your balance, transactions, or fund transfer.',
    v_unknown: 'I\'m sorry, I didn\'t understand that. Try: "check balance", "show transactions", "transfer 1000 to [name]"',
    v_emotion_angry: 'üò§ I can sense frustration. Let me help resolve this quickly.',
    v_emotion_urgent: '‚ö° Understood! Prioritizing your request now.',
    v_pin_ask: 'Please enter your PIN in the confirmation dialog to proceed.',
    v_transfer_pin: (amt, to) => `Initiating transfer of ‚Çπ${amt.toLocaleString('en-IN')} to ${to}. Please confirm with your PIN.`,
    v_transfer_not_found: 'Beneficiary not found in our system. Check the name or account number.',
    v_transfer_low_bal: 'Insufficient balance for this transfer.',
  },
  hi: {
    greet: n => `‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ${n}! üëã`,
    fill_all: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç‡•§',
    pwd_mismatch: '‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§Æ‡•á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§ñ‡§æ‡§§‡•á‡•§',
    pin_invalid: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Æ‡§æ‡§®‡•ç‡§Ø 4-‡§Ö‡§Ç‡§ï‡•Ä‡§Ø PIN ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
    not_found: '‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§ñ‡§æ‡§§‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§',
    wrong_pwd: '‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§',
    login_ok: n => `‚úÖ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à, ${n}!`,
    saved: '‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§π‡•á‡§ú‡•á ‡§ó‡§è!',
    fill_ben: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§ñ‡§æ‡§§‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
    fill_amt: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∞‡§æ‡§∂‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
    low_bal: '‡§á‡§∏ ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏‡•§',
    ben_not_found: '‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§',
    pin_confirm: (amt, ben) => `‚Çπ${amt.toLocaleString('en-IN')} ‡§ï‡•ã ${ben} ‡§ï‡•ã ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§ PIN ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§`,
    enter_pin: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ 4-‡§Ö‡§Ç‡§ï‡•Ä‡§Ø PIN ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
    wrong_pin: '‡§ó‡§≤‡§§ PIN‡•§ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§',
    transfer_success: (amt, ben) => `‚úÖ ‚Çπ${amt.toLocaleString('en-IN')} ‡§ï‡§æ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ${ben} ‡§ï‡•ã ‡§∏‡§´‡§≤ ‡§∞‡§π‡§æ!`,
    welcome_msg: n => `‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à ${n}! ‡§Ü‡§™‡§ï‡§æ ‡§ñ‡§æ‡§§‡§æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡•§`,
    v_bal: (n, b) => `‡§Ü‡§™‡§ï‡§æ ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏ ‚Çπ${b.toLocaleString('en-IN')} ‡§π‡•à‡•§ ‡§ñ‡§æ‡§§‡§æ: ${n}`,
    v_txn: (txns) => `‡§™‡§ø‡§õ‡§≤‡•á 5 ‡§≤‡•á‡§®‡§¶‡•á‡§®:\n` + txns.slice(0,5).map(t => `‚Ä¢ ${t.type==='CR'?'+':'-'}‚Çπ${t.amount.toLocaleString('en-IN')} ‚Äî ${t.desc}`).join('\n'),
    v_login_req: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§',
    v_transfer_ask_amount: '‡§Ü‡§™ ‡§ï‡§ø‡§§‡§®‡§æ ‡§î‡§∞ ‡§ï‡§ø‡§∏‡§ï‡•ã ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
    v_greet: '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç Nova ‡§π‡•Ç‡§Å‡•§ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏, ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§Ø‡§æ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§',
    v_unknown: '‡§Æ‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç, ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ‡•§ "‡§¨‡•à‡§≤‡•á‡§Ç‡§∏ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•ã", "‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§ï‡§∞‡•ã" ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Ç‡•§',
    v_emotion_angry: 'üò§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡•Ä ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Å‡•§',
    v_emotion_urgent: '‚ö° ‡§∏‡§Æ‡§ù‡§æ! ‡§Ü‡§™‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§ï‡•ã ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§¶‡•á ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‡•§',
    v_pin_ask: '‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ PIN ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
    v_transfer_pin: (amt, to) => `‚Çπ${amt.toLocaleString('en-IN')} ‡§ï‡§æ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ${to} ‡§ï‡•ã ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ PIN ‡§∏‡•á ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç‡•§`,
    v_transfer_not_found: '‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§',
    v_transfer_low_bal: '‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏‡•§',
  },
  mr: {
    greet: n => `‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞, ${n}! üëã`,
    fill_all: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡§æ.',
    pwd_mismatch: '‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ú‡•Å‡§≥‡§§ ‡§®‡§æ‡§π‡•Ä‡§§.',
    pin_invalid: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß 4-‡§Ö‡§Ç‡§ï‡•Ä PIN ‡§ü‡§æ‡§ï‡§æ.',
    not_found: '‡§ñ‡§æ‡§§‡•á ‡§∏‡§æ‡§™‡§°‡§≤‡•á ‡§®‡§æ‡§π‡•Ä.',
    wrong_pwd: '‡§ö‡•Å‡§ï‡•Ä‡§ö‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°.',
    login_ok: n => `‚úÖ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á, ${n}!`,
    saved: '‡§¨‡§¶‡§≤ ‡§ú‡§§‡§® ‡§ù‡§æ‡§≤‡•á!',
    fill_ben: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä‡§ö‡•á ‡§®‡§æ‡§µ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§ñ‡§æ‡§§‡•á ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§ü‡§æ‡§ï‡§æ.',
    fill_amt: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§∞‡§ï‡•ç‡§ï‡§Æ ‡§ü‡§æ‡§ï‡§æ.',
    low_bal: '‡§Ö‡§™‡•Å‡§∞‡•Ä ‡§∂‡§ø‡§≤‡•ç‡§≤‡§ï.',
    ben_not_found: '‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä ‡§∏‡§æ‡§™‡§°‡§≤‡§æ ‡§®‡§æ‡§π‡•Ä.',
    pin_confirm: (amt, ben) => `‚Çπ${amt.toLocaleString('en-IN')} ${ben} ‡§≤‡§æ ‡§π‡§∏‡•ç‡§§‡§æ‡§Ç‡§§‡§∞‡§ø‡§§ ‡§ï‡§∞‡§æ. PIN ‡§ü‡§æ‡§ï‡§æ.`,
    enter_pin: '‡§ï‡•É‡§™‡§Ø‡§æ 4-‡§Ö‡§Ç‡§ï‡•Ä PIN ‡§ü‡§æ‡§ï‡§æ.',
    wrong_pin: '‡§ö‡•Å‡§ï‡•Ä‡§ö‡§æ PIN.',
    transfer_success: (amt, ben) => `‚úÖ ‚Çπ${amt.toLocaleString('en-IN')} ${ben} ‡§≤‡§æ ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§π‡§∏‡•ç‡§§‡§æ‡§Ç‡§§‡§∞‡§ø‡§§ ‡§ù‡§æ‡§≤‡•á!`,
    welcome_msg: n => `‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á ${n}! ‡§§‡•Å‡§Æ‡§ö‡•á ‡§ñ‡§æ‡§§‡•á ‡§§‡§Ø‡§æ‡§∞ ‡§Ü‡§π‡•á.`,
    v_bal: (n, b) => `‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§∏‡§ß‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§∂‡§ø‡§≤‡•ç‡§≤‡§ï ‚Çπ${b.toLocaleString('en-IN')} ‡§Ü‡§π‡•á. ‡§ñ‡§æ‡§§‡•á: ${n}`,
    v_txn: (txns) => `‡§∂‡•á‡§µ‡§ü‡§ö‡•á 5 ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞:\n` + txns.slice(0,5).map(t => `‚Ä¢ ${t.type==='CR'?'+':'-'}‚Çπ${t.amount.toLocaleString('en-IN')} ‚Äî ${t.desc}`).join('\n'),
    v_login_req: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ü‡§ß‡•Ä ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ.',
    v_transfer_ask_amount: '‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ ‡§ï‡§ø‡§§‡•Ä ‡§Ü‡§£‡§ø ‡§ï‡•Å‡§£‡§æ‡§≤‡§æ ‡§™‡§æ‡§†‡§µ‡§æ‡§Ø‡§ö‡•á ‡§Ü‡§π‡•á?',
    v_greet: '‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä Nova ‡§Ü‡§π‡•á. ‡§∂‡§ø‡§≤‡•ç‡§≤‡§ï, ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§π‡§∏‡•ç‡§§‡§æ‡§Ç‡§§‡§∞‡§£‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§µ‡§ø‡§ö‡§æ‡§∞‡§æ.',
    v_unknown: '‡§Æ‡§æ‡§´ ‡§ï‡§∞‡§æ, ‡§∏‡§Æ‡§ú‡§≤‡•á ‡§®‡§æ‡§π‡•Ä. "‡§∂‡§ø‡§≤‡•ç‡§≤‡§ï ‡§™‡§æ‡§π‡§æ", "‡§™‡•à‡§∏‡•á ‡§™‡§æ‡§†‡§µ‡§æ" ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.',
    v_emotion_angry: 'üò§ ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Ö‡§°‡§ö‡§£ ‡§∏‡§Æ‡§ú‡§§‡•á. ‡§Æ‡•Ä ‡§≤‡§ó‡•á‡§ö ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡§§‡•ã.',
    v_emotion_urgent: '‚ö° ‡§∏‡§Æ‡§ú‡§≤‡•á! ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§µ‡§ø‡§®‡§Ç‡§§‡•Ä‡§≤‡§æ ‡§™‡•ç‡§∞‡§æ‡§ß‡§æ‡§®‡•ç‡§Ø ‡§¶‡•á‡§§ ‡§Ü‡§π‡•á.',
    v_pin_ask: '‡§™‡•Å‡§∑‡•ç‡§ü‡•Ä‡§∏‡§æ‡§†‡•Ä PIN ‡§ü‡§æ‡§ï‡§æ.',
    v_transfer_pin: (amt, to) => `‚Çπ${amt.toLocaleString('en-IN')} ${to} ‡§≤‡§æ ‡§™‡§æ‡§†‡§µ‡§§ ‡§Ü‡§π‡•á. PIN ‡§®‡•á ‡§™‡•Å‡§∑‡•ç‡§ü‡•Ä ‡§ï‡§∞‡§æ.`,
    v_transfer_not_found: '‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä ‡§∏‡§æ‡§™‡§°‡§≤‡§æ ‡§®‡§æ‡§π‡•Ä.',
    v_transfer_low_bal: '‡§Ö‡§™‡•Å‡§∞‡•Ä ‡§∂‡§ø‡§≤‡•ç‡§≤‡§ï.',
  },
  ta: {
    greet: n => `‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç, ${n}! üëã`,
    fill_all: '‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡Æ§‡Øá‡Æµ‡Øà‡ÆØ‡Ææ‡Æ© ‡Æ™‡ØÅ‡Æ≤‡Æô‡Øç‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    pwd_mismatch: '‡Æï‡Æü‡Æµ‡ØÅ‡Æö‡Øç‡Æö‡Øä‡Æ±‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
    pin_invalid: '‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ© 4-‡Æá‡Æ≤‡Æï‡Øç‡Æï PIN ‡Æê ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    not_found: '‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æï‡Ææ‡Æ£‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
    wrong_pwd: '‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© ‡Æï‡Æü‡Æµ‡ØÅ‡Æö‡Øç‡Æö‡Øä‡Æ≤‡Øç.',
    login_ok: n => `‚úÖ ‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç, ${n}!`,
    saved: '‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ©!',
    fill_ben: '‡Æ™‡ÆØ‡Æ©‡Ææ‡Æ≥‡Æ∞‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æ£‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    fill_amt: '‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ© ‡Æ§‡Øä‡Æï‡Øà‡ÆØ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    low_bal: '‡Æ™‡Øã‡Æ§‡ØÅ‡ÆÆ‡Ææ‡Æ© ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.',
    ben_not_found: '‡Æ™‡ÆØ‡Æ©‡Ææ‡Æ≥‡Æ∞‡Øç ‡Æï‡Ææ‡Æ£‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
    pin_confirm: (amt, ben) => `‚Çπ${amt.toLocaleString('en-IN')} ‡Æê ${ben} ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç. PIN ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.`,
    enter_pin: '4-‡Æá‡Æ≤‡Æï‡Øç‡Æï PIN ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    wrong_pin: '‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© PIN.',
    transfer_success: (amt, ben) => `‚úÖ ‚Çπ${amt.toLocaleString('en-IN')} ${ben} ‡Æï‡Øç‡Æï‡ØÅ ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ!`,
    welcome_msg: n => `‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç ${n}! ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡ÆØ‡Ææ‡Æ∞‡Ææ‡Æï ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ.`,
    v_bal: (n, b) => `‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Æ±‡Øç‡Æ™‡Øã‡Æ§‡Øà‡ÆØ ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‚Çπ${b.toLocaleString('en-IN')}. ‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ: ${n}`,
    v_txn: (txns) => `‡Æï‡Æü‡Øà‡Æö‡Æø 5 ‡Æ™‡Æ∞‡Æø‡Æµ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Æ©‡Øà‡Æï‡Æ≥‡Øç:\n` + txns.slice(0,5).map(t => `‚Ä¢ ${t.type==='CR'?'+':'-'}‚Çπ${t.amount.toLocaleString('en-IN')} ‚Äî ${t.desc}`).join('\n'),
    v_login_req: '‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    v_transfer_ask_amount: '‡Æé‡Æµ‡Øç‡Æµ‡Æ≥‡Æµ‡ØÅ, ‡ÆØ‡Ææ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™ ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç?',
    v_greet: '‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç! ‡Æ®‡Ææ‡Æ©‡Øç Nova. ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ, ‡Æ™‡Æ∞‡Æø‡Æµ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Æ©‡Øà ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡Æ£‡ÆÆ‡Øç ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ‡Æµ‡Æ§‡ØÅ ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æï‡Øá‡Æ≥‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
    v_unknown: '‡ÆÆ‡Æ©‡Øç‡Æ©‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ™‡ØÅ‡Æ∞‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. "‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç", "‡Æ™‡Æ£‡ÆÆ‡Øç ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ" ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    v_emotion_angry: 'üò§ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Øã‡Æ™‡ÆÆ‡Øç ‡Æ™‡ØÅ‡Æ∞‡Æø‡Æï‡Æø‡Æ±‡Æ§‡ØÅ. ‡Æâ‡Æü‡Æ©‡Øá ‡Æ§‡ØÄ‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æ§‡Æ∞‡ØÅ‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç.',
    v_emotion_urgent: '‚ö° ‡Æ™‡ØÅ‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ! ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Øã‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Øà‡ÆØ‡Øà ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡ØÅ‡Æ∞‡Æø‡ÆÆ‡Øà ‡Æ§‡Æ∞‡ØÅ‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç.',
    v_pin_ask: '‡Æ§‡Øä‡Æü‡Æ∞ PIN ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
    v_transfer_pin: (amt, to) => `‚Çπ${amt.toLocaleString('en-IN')} ‡Æê ${to} ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç. PIN ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç.`,
    v_transfer_not_found: '‡Æ™‡ÆØ‡Æ©‡Ææ‡Æ≥‡Æ∞‡Øç ‡Æï‡Ææ‡Æ£‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
    v_transfer_low_bal: '‡Æ™‡Øã‡Æ§‡ØÅ‡ÆÆ‡Ææ‡Æ© ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.',
  }
};

function T(key, ...args) {
  const lang = session.lang || 'en';
  const s = STRINGS[lang] || STRINGS['en'];
  const val = s[key] || STRINGS['en'][key];
  if(!val) return key;
  return typeof val === 'function' ? val(...args) : val;
}

/* ====================================================
   LANGUAGE UI
   ==================================================== */
function setLang(lang) {
  session.lang = lang;
  applyLangUI();
  if(getUser()) vpAddMsg(T('v_greet'), 'ai');
}

function switchLangPill(el, lang) {
  document.querySelectorAll('.lang-pill').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  session.lang = lang;
}

function applyLangUI() {
  const lang = session.lang;
  // Hero
  const ht2 = document.getElementById('ht2');
  if(ht2) {
    const heroTitles = {
      en: 'Banking With <span class="accent">Your Voice</span>,<br><span class="gold-text">Your Language</span>',
      hi: '‡§Ö‡§™‡§®‡•Ä <span class="accent">‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•á</span> ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó,<br><span class="gold-text">‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç</span>',
      mr: '‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ <span class="accent">‡§Ü‡§µ‡§æ‡§ú‡§æ‡§®‡•á</span> ‡§¨‡§Å‡§ï‡§ø‡§Ç‡§ó,<br><span class="gold-text">‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§≠‡§æ‡§∑‡•á‡§§</span>',
      ta: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç <span class="accent">‡Æï‡ØÅ‡Æ∞‡Æ≤‡Æø‡Æ≤‡Øç</span> ‡Æµ‡Æô‡Øç‡Æï‡Æø,<br><span class="gold-text">‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Æø‡Æ≤‡Øç</span>'
    };
    ht2.innerHTML = heroTitles[lang] || heroTitles['en'];
  }
  const aiTip = document.getElementById('ai-tip');
  if(aiTip) {
    const tips = {
      en: 'üí° AI Insight: Spending up 28% in Jan. Consider a monthly budget.',
      hi: 'üí° AI ‡§∏‡§≤‡§æ‡§π: ‡§ú‡§®‡§µ‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ñ‡§∞‡•ç‡§ö 28% ‡§¨‡§¢‡§º‡§æ‡•§ ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ú‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç‡•§',
      mr: 'üí° AI ‡§∏‡•Ç‡§ö‡§®‡§æ: ‡§ú‡§æ‡§®‡•á‡§µ‡§æ‡§∞‡•Ä‡§§ ‡§ñ‡§∞‡•ç‡§ö 28% ‡§µ‡§æ‡§¢‡§≤‡§æ. ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ú‡§ü ‡§ï‡§∞‡§æ.',
      ta: 'üí° AI ‡ÆØ‡Øã‡Æö‡Æ©‡Øà: ‡Æú‡Æ©‡Æµ‡Æ∞‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æö‡ØÜ‡Æ≤‡Æµ‡ØÅ 28% ‡ÆÖ‡Æ§‡Æø‡Æï‡Æ∞‡Æø‡Æ§‡Øç‡Æ§‡Æ§‡ØÅ. ‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞ ‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.'
    };
    aiTip.textContent = tips[lang] || tips['en'];
  }
}

/* ====================================================
   VOICE PANEL AI CHATBOT
   ==================================================== */
let vpLangActive = 'en';

function openVP() { document.getElementById('voice-panel').classList.add('open'); }
function closeVP() { document.getElementById('voice-panel').classList.remove('open'); }

function vpLang(el, lang) {
  document.querySelectorAll('.vpl-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  vpLangActive = lang;
  session.lang = lang;
  vpAddMsg(T('v_greet'), 'ai');
}

function vpAddMsg(text, type, emotion) {
  const msgs = document.getElementById('vp-msgs');
  const div = document.createElement('div');
  div.className = 'vpm ' + type;
  div.textContent = text;
  msgs.appendChild(div);
  if(emotion) {
    const emo = document.getElementById('vp-emo');
    emo.innerHTML = `<div class="vp-emotion">üß† ${emotion}</div>`;
  }
  msgs.scrollTop = msgs.scrollHeight;
}

function vpTyping() {
  const msgs = document.getElementById('vp-msgs');
  const d = document.createElement('div');
  d.className = 'vpm ai'; d.id = 'vp-typing'; d.textContent = '‚è≥ Nova is thinking...';
  msgs.appendChild(d); msgs.scrollTop = msgs.scrollHeight;
}

function vpRemoveTyping() { const d = document.getElementById('vp-typing'); if(d) d.remove(); }

function detectEmotion(text) {
  const t = text.toLowerCase();
  if(t.includes('angry')||t.includes('terrible')||t.includes('worst')||t.includes('hate')||t.includes('‡§ó‡•Å‡§∏‡•ç‡§∏‡§æ')||t.includes('‡§∞‡§æ‡§ó‡§æ‡§µ‡§≤‡•ã')) return T('v_emotion_angry');
  if(t.includes('urgent')||t.includes('emergency')||t.includes('asap')||t.includes('‡§ú‡§≤‡•ç‡§¶‡•Ä')||t.includes('‡§§‡§æ‡§§‡§°‡•Ä')) return T('v_emotion_urgent');
  return null;
}

// Parse transfer intent: "transfer 5000 to rahul" / "send 2000 to NB10003"
function parseTransferIntent(text) {
  const t = text.toLowerCase();
  const amtMatch = t.match(/(\d[\d,]*)/);
  const toMatch = t.match(/to\s+(.+)$/i) || t.match(/(?:‡§ï‡•ã|‡§≤‡§æ|‡Æï‡Øç‡Æï‡ØÅ|‡§ï‡•ç‡§Ø‡•ã‡§Ç)\s+(.+)/i);
  if(!amtMatch) return null;
  const amt = parseFloat(amtMatch[1].replace(/,/g,''));
  const to = toMatch ? toMatch[1].trim() : null;
  return { amt, to };
}

function handleVoiceCommand(text) {
  const u = getUser();
  const t = text.toLowerCase();
  const emotion = detectEmotion(text);

  // Balance
  if(t.includes('balance')||t.includes('‡§¨‡•à‡§≤‡•á‡§Ç‡§∏')||t.includes('‡§∂‡§ø‡§≤‡•ç‡§≤‡§ï')||t.includes('‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ')||t.includes('bakiye')) {
    if(!u) return [T('v_login_req'), emotion];
    return [T('v_bal', u.accNo, u.balance), emotion];
  }

  // Transactions
  if(t.includes('transaction')||t.includes('transact')||t.includes('history')||t.includes('‡§≤‡•á‡§®‡§¶‡•á‡§®')||t.includes('‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞')||t.includes('‡Æ™‡Æ∞‡Æø‡Æµ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Æ©‡Øà')) {
    if(!u) return [T('v_login_req'), emotion];
    return [T('v_txn', u.txns||[]), emotion];
  }

  // Transfer
  if(t.includes('transfer')||t.includes('send')||t.includes('‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞')||t.includes('‡§™‡§æ‡§†‡§µ‡§æ')||t.includes('‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ')||t.includes('‡§≠‡•á‡§ú‡•ã')) {
    if(!u) return [T('v_login_req'), emotion];
    const parsed = parseTransferIntent(text);
    if(!parsed || !parsed.to) return [T('v_transfer_ask_amount'), emotion];
    const { amt, to } = parsed;
    const receiver = DB.findCustomer(to);
    if(!receiver) return [T('v_transfer_not_found'), emotion];
    if(amt > u.balance) return [T('v_transfer_low_bal'), emotion];
    // Kick off transfer UI
    document.getElementById('tf-ben').value = receiver.name;
    document.getElementById('tf-amt').value = amt;
    setTimeout(() => { setSection('transfer', null); startTransfer(); }, 300);
    return [T('v_transfer_pin', amt, receiver.name), emotion];
  }

  // Block card
  if(t.includes('block')||t.includes('‡§¨‡•ç‡§≤‡•â‡§ï')||t.includes('‡§¨‡§Ç‡§¶')||t.includes('‡Æ§‡Æü‡Øà')) {
    return ['üõë Card block request initiated. Confirm via PIN in Settings > Security.', emotion];
  }

  // EMI
  if(t.includes('emi')||t.includes('loan')||t.includes('‡§ï‡§∞‡•ç‡§ú')||t.includes('‡Æï‡Æü‡Æ©‡Øç')) {
    if(!u) return [T('v_login_req'), emotion];
    return ['üìÖ Your Car Loan EMI is ‚Çπ8,450/month.\nNext due: 5 March 2026\nOutstanding: ‚Çπ4,82,000', emotion];
  }

  // Greeting
  if(t.includes('hello')||t.includes('hi')||t.includes('‡§®‡§Æ‡§∏‡•ç‡§§‡•á')||t.includes('‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞')||t.includes('‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç')) {
    return [T('v_greet'), emotion];
  }

  return [T('v_unknown'), emotion];
}

function vpSend() {
  const inp = document.getElementById('vp-inp');
  const text = inp.value.trim();
  if(!text) return;
  vpAddMsg(text, 'user');
  inp.value = '';
  vpTyping();
  setTimeout(() => {
    vpRemoveTyping();
    const [response, emotion] = handleVoiceCommand(text);
    vpAddMsg(response, 'ai', emotion);
    speak(response);
  }, 900);
}

function vpMic() {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SR) {
    toast('Voice input requires Chrome browser.', 'err');
    return;
  }
  const r = new SR();
  const langMap = { en:'en-IN', hi:'hi-IN', mr:'mr-IN', ta:'ta-IN' };
  r.lang = langMap[vpLangActive] || 'en-IN';
  r.onresult = (e) => {
    const text = e.results[0][0].transcript;
    document.getElementById('vp-inp').value = text;
    vpSend();
  };
  r.onerror = () => toast('Voice capture error. Please speak clearly.','err');
  r.start();
  toast('üé§ Listening...', 'ok');
}

function speak(text) {
  if(!('speechSynthesis' in window)) return;
  const langMap = { en:'en-IN', hi:'hi-IN', mr:'mr-IN', ta:'ta-IN' };
  const u = new SpeechSynthesisUtterance(text.replace(/[‚Çπ‚Ä¢üè¶üìãüîêüõëüìÖ‚ö°‚úÖüí°üß†üò§‚è≥]/g,''));
  u.lang = langMap[vpLangActive] || 'en-IN';
  u.rate = 0.92;
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

document.getElementById('vp-inp').addEventListener('keypress', e => { if(e.key==='Enter') vpSend(); });

/* ====================================================
   HELPERS
   ==================================================== */
function pinNav(el, nextId) {
  if(el.value.length === 1) { const n = document.getElementById(nextId); if(n) n.focus(); }
}

let toastTimer;
function toast(msg, type) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast show ' + type;
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 4000);
}

function toggleVoiceBio() {
  toast('Voice biometric preference updated.','ok');
}

function toggleVP() {
  const vp = document.getElementById('voice-panel');
  vp.classList.toggle('open');
}

/* ====================================================
   INIT
   ==================================================== */
DB.loadFromStorage();
seedTxns();

// Initial VP greeting
setTimeout(() => {
  vpAddMsg(STRINGS['en'].v_greet, 'ai');
}, 1000);
</script>
</body>
</html>